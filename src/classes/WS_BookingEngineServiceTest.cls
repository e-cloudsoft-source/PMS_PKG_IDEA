/**
 * This class contains unit tests for validating the behavior of Apex classes
 * and triggers.
 *
 * Unit tests are class methods that verify whether a particular piece
 * of code is working properly. Unit test methods take no arguments,
 * commit no data to the database, and are flagged with the testMethod
 * keyword in the method definition.
 *
 * All test methods in an organization are executed whenever Apex code is deployed
 * to a production organization to confirm correctness, ensure code
 * coverage, and prevent regressions. All Apex classes are
 * required to have at least 75% code coverage in order to be deployed
 * to a production organization. In addition, all triggers must have some code coverage.
 * 
 * The @isTest class annotation indicates this class only contains test
 * methods. Classes defined with the @isTest annotation do not count against
 * the organization size limit for all Apex scripts.
 *
 * See the Apex Language Reference for more information about Testing and Code Coverage.
 */
@isTest
private class WS_BookingEngineServiceTest {

    static testMethod void getroomtypelistTest() {
        // 部屋タイプ一覧をテストする
        TypeOfRooms__c type1 = TestCommon.createTypeOfRoom();
        type1.seq__c = 10000;
        update type1;
        List<Room__c> rooms = TestCommon.createRooms(3, type1.Id);
        rooms[0].seq__c = 10000;
        rooms[1].seq__c = 10001;
        rooms[2].seq__c = 10002;
        update rooms;
        // 部屋タイプ属性定義を追加する
        RoomTypeProp__c rtprop = new RoomTypeProp__c(
        	Name = '部屋タイプ属性',
        	PropValue__c = '部屋タイプ詳細属性情報',
        	RoomTypeRef__c = type1.Id
        );
        insert rtprop;
        RoomProp__c rPop = new RoomProp__c(
        	Name = '部屋属性',
        	PropValue__c = '部屋詳細属性情報',
        	RoomRef__c = rooms[0].Id
        );
        insert rPop;
        // 画像ファイルを作成する
        Id rtFolderId = [select id from folder where DeveloperName = 'BookingApiPhotoRoomType'].Id;
        Id rMFolderId = [select id from folder where DeveloperName = 'BookingApiPhotoRoom'].Id;
        List<Document> newDocs = new list<Document>();
    	Document roomTypeDoc = new Document();
    	roomTypeDoc.Name = String.valueof(type1.seq__c);
    	roomTypeDoc.DeveloperName = 'X_'+CommUtils.getRandom(10);
    	roomTypeDoc.FolderId = rtFolderId;
    	roomTypeDoc.keyWords = 'A01';
    	roomTypeDoc.IsPublic = true;
    	roomTypeDoc.Body = Blob.valueOf('ABC');
    	newDocs.add(roomTypeDoc);
    	Document roomDoc = new Document();
    	roomDoc.Name = String.valueof(rooms[0].seq__c);
    	roomDoc.DeveloperName = 'X_'+CommUtils.getRandom(10);
    	roomDoc.FolderId = rMFolderId;
    	roomDoc.keyWords = 'B01';
    	roomDoc.IsPublic = true;
    	roomDoc.Body = Blob.valueOf('ABC');
    	newDocs.add(roomDoc);
    	insert newDocs;
        // 部屋属性定義を追加する
        String reqXml = '<GetRoomTypeListRQ><CommonRequest><ShopCode></ShopCode></CommonRequest><RoomTypeInfo><DataType>1</DataType></RoomTypeInfo></GetRoomTypeListRQ>';
        String rs = WS_BookingEngineService.getroomtypelistService(reqXml);
        System.assert(rs.contains('<IsSuccess>true</IsSuccess>'));
        reqXml = '<GetRoomTypeListRQ><CommonRequest><ShopCode></ShopCode></CommonRequest><RoomTypeInfo><DataType>0</DataType></RoomTypeInfo></GetRoomTypeListRQ>';
        rs = WS_BookingEngineService.getroomtypelistService(reqXml);
        System.assert(rs.contains('<IsSuccess>true</IsSuccess>'));
        reqXml = '<GetRoomTypeListRQ><CommonRequest><ShopCode></ShopCode></CommonRequest><RoomTypeInfo><DataType>2</DataType></RoomTypeInfo></GetRoomTypeListRQ>';
        rs = WS_BookingEngineService.getroomtypelistService(reqXml);
        System.assert(rs.contains('<IsSuccess>false</IsSuccess>'));
        
    }
    
    static testMethod void getPlanListServiceTest() {
    	CommDefine__c comDef = TestCommon.createCommDefine();
    	String defaultTier = 'Tier4';
    	// 部屋タイプ
    	TypeOfRooms__c type1 = TestCommon.createTypeOfRoom();
    	String roomTypeCode = type1.RoomTypeCode__c;
    	// ラクレート情報作成
    	RackRateTable__c raceRate1 = TestCommon.createRaceRateInfo(type1.Id, defaultTier, '1');	
    	RackRateTable__c raceRate2 = TestCommon.createRaceRateInfo(type1.Id, defaultTier, '2');	
    	RackRateTable__c raceRate3 = TestCommon.createRaceRateInfo(type1.Id, defaultTier, '3');	
    	// プラン作成
    	Plan__c plan = TestCommon.createPlan();
    	
        // 画像ファイルを作成する
        Id folderId = [select id from folder where DeveloperName = 'BookingApiPhoto'].Id;
    	insert new Document(
	    	Name = String.valueof(plan.PlanNo__c),
	    	DeveloperName = 'X_'+CommUtils.getRandom(10),
	    	FolderId = folderId,
	    	IsPublic = true,
	    	Body = Blob.valueOf('ABC')
    	);
    	//プラン属性情報作成する
    	PlanProp__c planProp = new PlanProp__c(
    		Name = 'PLANPROP_'+CommUtils.getRandom(10)
    	);
    	insert planProp;
    	plan.PropRef__c = planProp.Id;
    	update plan;
    	
    	// 出力を行う
    	String reqXml = '<GetPlanListRQ><CommonRequest><ShopCode></ShopCode></CommonRequest><ExtractionCondition><ExtractionProcedure>1</ExtractionProcedure><RoomTypeCode>'+roomTypeCode+'</RoomTypeCode><SearchDurationFrom>20160818</SearchDurationFrom><SearchDurationTo>20160901</SearchDurationTo><AgtPlanNoInclude>1</AgtPlanNoInclude></ExtractionCondition></GetPlanListRQ>';
    	String rs = WS_BookingEngineService.getPlanListService(reqXml);
    	System.assert(rs.contains('<IsSuccess>true</IsSuccess>'),rs);
		reqXml = '<GetPlanListRQ><CommonRequest><ShopCode></ShopCode></CommonRequest><ExtractionCondition><ExtractionProcedure>2</ExtractionProcedure><RoomTypeCode>'+roomTypeCode+'</RoomTypeCode><SearchDurationFrom>20160818</SearchDurationFrom><SearchDurationTo>20160901</SearchDurationTo><AgtPlanNoInclude>1</AgtPlanNoInclude></ExtractionCondition></GetPlanListRQ>';
    	rs = WS_BookingEngineService.getPlanListService(reqXml);
    	System.assert(rs.contains('<IsSuccess>true</IsSuccess>'),rs);
    	reqXml = '<GetPlanListRQ><CommonRequest><ShopCode></ShopCode></CommonRequest><ExtractionCondition><ExtractionProcedure>2</ExtractionProcedure><RoomTypeCode>'+roomTypeCode+'</RoomTypeCode><SearchDurationFrom></SearchDurationFrom><SearchDurationTo>20160901</SearchDurationTo><AgtPlanNoInclude>1</AgtPlanNoInclude></ExtractionCondition></GetPlanListRQ>';
		rs = WS_BookingEngineService.getPlanListService(reqXml);
    	System.assert(rs.contains('<IsSuccess>false</IsSuccess>'),rs);
		reqXml = '<GetPlanListRQ><CommonRequest><ShopCode></ShopCode></CommonRequest><ExtractionCondition><ExtractionProcedure>2</ExtractionProcedure><RoomTypeCode>'+roomTypeCode+'</RoomTypeCode><SearchDurationFrom></SearchDurationFrom><SearchDurationTo>20160901</SearchDurationTo><AgtPlanNoInclude>1</AgtPlanNoInclude></ExtractionCondition></GetPlanListRQ>';
    	rs = WS_BookingEngineService.getPlanListService(reqXml);
    	System.assert(rs.contains('<IsSuccess>false</IsSuccess>'),rs);
		reqXml = '<GetPlanListRQ><CommonRequest><ShopCode></ShopCode></CommonRequest><ExtractionCondition><ExtractionProcedure>3</ExtractionProcedure><RoomTypeCode>'+roomTypeCode+'</RoomTypeCode><SearchDurationFrom>20160818</SearchDurationFrom><SearchDurationTo>20160901</SearchDurationTo><AgtPlanNoInclude>1</AgtPlanNoInclude></ExtractionCondition></GetPlanListRQ>';
    	rs = WS_BookingEngineService.getPlanListService(reqXml);
    	System.assert(rs.contains('<IsSuccess>false</IsSuccess>'),rs);
		reqXml = '<GetPlanListRQ><CommonRequest><ShopCode></ShopCode></CommonRequest><ExtractionCondition><ExtractionProcedure>3</ExtractionProcedure><RoomTypeCode>'+roomTypeCode+'</RoomTypeCode><SearchDurationFrom>20160818</SearchDurationFrom><SearchDurationTo>20160901</SearchDurationTo><PlanCode>'+plan.PackageCode__c+'</PlanCode><AgtPlanNoInclude>1</AgtPlanNoInclude></ExtractionCondition></GetPlanListRQ>';
    	rs = WS_BookingEngineService.getPlanListService(reqXml);
    	System.assert(rs.contains('<IsSuccess>true</IsSuccess>'),rs);
    	System.assert(rs.contains(plan.PackageCode__c),rs);
    	// ERROR
		reqXml = '<GetPlanListRQ><CommonRequest><ShopCode></ShopCode></CommonRequest><ExtractionCondition><ExtractionProcedure>2</ExtractionProcedure><RoomTypeCode></RoomTypeCode><SearchDurationFrom></SearchDurationFrom><SearchDurationTo>20160901</SearchDurationTo><AgtPlanNoInclude>1</AgtPlanNoInclude></ExtractionCondition></GetPlanListRQ>';
    	rs = WS_BookingEngineService.getPlanListService(reqXml);
    	System.assert(rs.contains('<IsSuccess>false</IsSuccess>'),rs);
		reqXml = '<GetPlanListRQ><CommonRequest><ShopCode></ShopCode></CommonRequest><ExtractionCondition><ExtractionProcedure>0</ExtractionProcedure><RoomTypeCode></RoomTypeCode><SearchDurationFrom></SearchDurationFrom><SearchDurationTo>20160901</SearchDurationTo><AgtPlanNoInclude>1</AgtPlanNoInclude></ExtractionCondition></GetPlanListRQ>';
    	rs = WS_BookingEngineService.getPlanListService(reqXml);
    	System.assert(rs.contains('<IsSuccess>false</IsSuccess>'),rs);
    }
    // 5. 在庫情報取得
    static testMethod void getroomtypeinventorylistServiceTest() {
    	// 日付
    	Date s = Date.today();
    	Date e = s.addDays(5);
    	String strBegDt = Datetime.newInstance(s.year(),s.month(),s.day()).format('yyyy-MM-dd');
    	String strEndDt = Datetime.newInstance(e.year(),e.month(),e.day()).format('yyyy-MM-dd');
    	// 部屋タイプ情報作成
    	TypeOfRooms__c roomType = TestCommon.createTypeOfRoom();
    	Decimal maxRooms = roomType.MaxRooms__c;
    	String roomTypeCode = roomType.RoomTypeCode__c;
    	// 該当部屋タイプの予約情報作成
    	Lead__c lead1 = TestCommon.createBookingLead(s, roomType.Id, 1);
    	Lead__c lead2 = TestCommon.createBookingLead(s.addDays(1), roomType.Id, 1);
    	Lead__c lead3 = TestCommon.createBookingLead(s.addDays(2), roomType.Id, 1);
    	// 故障部屋情報を作成する
    	// 部屋作成
    	Room__c room = TestCommon.createRooms(roomType.Id);
    	// 予約情報を作成する
    	// 故障管理データ作成[1件]
    	RoomsStatus__c badStatus1 = TestCommon.createBadRoom(room.Id, s.addDays(0), s.addDays(1));
    	// 
    	String reqXml = '<GetRoomTypeInventoryListRQ><CommonRequest><ShopCode></ShopCode></CommonRequest><ExtractionCondition><ExtractionProcedure>3</ExtractionProcedure><SearchDurationFrom>'+strBegDt+'</SearchDurationFrom><SearchDurationTo>'+strEndDt+'</SearchDurationTo><RoomTypeCode>'+roomTypeCode+'</RoomTypeCode></ExtractionCondition></GetRoomTypeInventoryListRQ>';
    	String rs = WS_BookingEngineService.getroomtypeinventorylistService(reqXml);
    	System.assert(rs.contains('<IsSuccess>true</IsSuccess>'),rs);
    	System.assert(rs.contains('<RemainingCount>'+maxRooms+'</RemainingCount>'),rs);
    	System.assert(rs.contains('<RemainingCount>'+(maxRooms-1)+'</RemainingCount>'),rs);
    	System.assert(rs.contains('<RemainingCount>'+(maxRooms-2)+'</RemainingCount>'),rs);
    	// ERROR(XML ERR)
    	reqXml = '<GetRoomTypeInventoryListRQ><CommonRequest><ShopCode></ShopCode></CommonRequest><ExtractionCondition><ExtractionProcedure>3</ExtractionProcedure><SearchDurationFrom>'+strBegDt+'</SearchDurationFrom><SearchDurationTo>'+strEndDt+'</SearchDurationTo><RoomTypeCode>'+roomTypeCode+'</RoomTypeCode></ExtractionCondition><GetRoomTypeInventoryListRQ>';
    	rs = WS_BookingEngineService.getroomtypeinventorylistService(reqXml);
		System.assert(rs.contains('<IsSuccess>false</IsSuccess>'),rs);
    	reqXml = '<GetRoomTypeInventoryListRQ><CommonRequest><ShopCode></ShopCode></CommonRequest><ExtractionCondition><ExtractionProcedure>1</ExtractionProcedure><SearchDurationFrom>'+strBegDt+'</SearchDurationFrom><SearchDurationTo>'+strEndDt+'</SearchDurationTo><RoomTypeCode>'+roomTypeCode+'</RoomTypeCode></ExtractionCondition></GetRoomTypeInventoryListRQ>';
    	rs = WS_BookingEngineService.getroomtypeinventorylistService(reqXml);
		System.assert(rs.contains('<IsSuccess>false</IsSuccess>'),rs);
    }
    // 7. 予約情報取得
    static testMethod void getbookinglistSerivceTest() {
    	ShopInformation__c shop = TestCommon.createShopInfo();
    	//TestCommon.createConfigDoc();
    	String shopCode = shop.ShopCode__c;
    	createConfigDoc(shopCode);
    	String infoTravelXML = '<?xml version="1.0" encoding="UTF-8" standalone="yes"?><AllotmentBookingReport><TransactionType><DataFrom>FromTravelAgency</DataFrom><DataClassification>NewBookReport</DataClassification><SystemDate>2013-07-09</SystemDate></TransactionType><AccommodationInformation><AccommodationName>元湯陣屋</AccommodationName><AccommodationCode>14000010</AccommodationCode></AccommodationInformation><SalesOfficeInformation><SalesOfficeCompanyName>予約プロ</SalesOfficeCompanyName><SalesOfficeName>予約プロ</SalesOfficeName><SalesOfficeCode>88</SalesOfficeCode><SalesOfficePhoneNumber>052-262-8041</SalesOfficePhoneNumber></SalesOfficeInformation><BasicInformation><TravelAgencyBookingNumber>A001781590</TravelAgencyBookingNumber><TravelAgencyBookingDate>2013-07-09</TravelAgencyBookingDate><TravelAgencyBookingTime>23:47:14</TravelAgencyBookingTime><TravelAgencyReportNumber>00000051</TravelAgencyReportNumber><GuestOrGroupNameSingleByte>ﾃｽﾄﾖﾔｸ_</GuestOrGroupNameSingleByte><GuestOrGroupNameKanjiName>テスト予約No.2013/07/09_</GuestOrGroupNameKanjiName><CheckInDate>2013-07-22</CheckInDate><CheckInTime>15:30:00</CheckInTime><CheckOutDate>2013-07-25</CheckOutDate><Nights>3</Nights><TotalRoomCount>2</TotalRoomCount><GrandTotalPaxCount>14</GrandTotalPaxCount><TotalPaxMaleCount>2</TotalPaxMaleCount><TotalPaxFemaleCount>2</TotalPaxFemaleCount><TotalChildA70Count>2</TotalChildA70Count><TotalChildB50Count>4</TotalChildB50Count><TotalChildC30Count>2</TotalChildC30Count><TotalChildDNoneCount>2</TotalChildDNoneCount><PackagePlanName>【１泊朝食付】朝膳朝食付きプラン　チェックイン24:00までOK！</PackagePlanName><PackagePlanCode>3333</PackagePlanCode><MealCondition>1nightBreakfast</MealCondition><SpecificMealCondition>NoneSpecified</SpecificMealCondition><OtherServiceInformation>○携帯電話番号[MobilePhoneNumber]：00-2345-6789○ご要望・ご質問：NroomsNnightsのテストのため</OtherServiceInformation></BasicInformation><BasicRateInformation><RoomRateOrPersonalRate>PersonalRate</RoomRateOrPersonalRate><TaxServiceFee>IncludingServiceAndTax</TaxServiceFee><TotalAccommodationCharge>429135</TotalAccommodationCharge></BasicRateInformation><RoomAndGuestInformation><RoomAndGuestList><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount></RoomInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerChildB50Rate>0</PerChildB50Rate></RoomRateInformation></RoomAndGuestList><RoomAndGuestList><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>2</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount></RoomInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerChildB50Rate>0</PerChildB50Rate></RoomRateInformation></RoomAndGuestList><RoomAndGuestList><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount></RoomInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerChildB50Rate>0</PerChildB50Rate></RoomRateInformation></RoomAndGuestList><RoomAndGuestList><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>2</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount></RoomInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerChildB50Rate>0</PerChildB50Rate></RoomRateInformation></RoomAndGuestList><RoomAndGuestList><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount></RoomInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerChildB50Rate>0</PerChildB50Rate></RoomRateInformation></RoomAndGuestList><RoomAndGuestList><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>1</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount></RoomInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerChildB50Rate>0</PerChildB50Rate></RoomRateInformation></RoomAndGuestList></RoomAndGuestInformation><RisaplsInformation><RisaplsCommonInformation><Basic><SalesOfficeCompanyCode>88</SalesOfficeCompanyCode><TelegramDiv></TelegramDiv><RisaplsDataID></RisaplsDataID><RisaplsTelegramNumber></RisaplsTelegramNumber>';
    	infoTravelXML += '<TelegramData>予約通知予約プロSNT-NET07-0923:49(88)予約番号：A001781590NO.00000051元湯陣屋様(14000010)宿泊者情報：テスト予約No.2013/07/09_TEL:01-2345-6789ﾃｽﾄﾖﾔｸ_Mail:hiroyuki_morimoto@jinya-inn.com住所:(〒257-0001)神奈川県秦野市鶴巻北inn.com住所:(〒257-0001)神奈川県秦野市鶴巻北プラン名：【１泊朝食付】朝膳朝食付きプラン　チェックイン24:00までOK！(185)2013年07月22日から3泊朝食付サ込税込入込方法：チェックイン時間：15:30人員総数：14人内訳：(男)2名+(女)2名+(Ａ)2名+(Ｂ)4名+(Ｃ)2名+(Ｄ)2名客室総数：2室07月22日24(純和風客室(バスルーム無し))大人（男）1名@12,000大人（女）1名@12,000子供Ａ1名@12,000小学生子供Ｂ1名@12,000小児（食事布団あり）子供Ｂ1名@0小児（食事布団なし）子供Ｃ1名@3,000小児（食事のみ）子供Ｄ1名@10,000小児（布団のみ）24(純和風客室(バスルーム無し))大人（男）1名@12,000大人（女）1名@12,000子供Ａ1名@12,000小学生子供Ｂ1名@12,000小児（食事布団あり）子供Ｂ1名@0小児（食事布団なし）子供Ｃ1名@3,000小児（食事のみ）子供Ｄ1名@10,000小児（布団のみ）07月23日24(純和風客室(バスルーム無し))大人（男）1名@12,000大人（女）1名@12,000子供Ａ1名@12,000小学生子供Ｂ1名@12,000小児（食事布団あり）子供Ｂ1名@0小児（食事布団なし）子供Ｃ1名@3,000小児（食事のみ）子供Ｄ1名@10,000小児（布団のみ）24(純和風客室(バスルーム無し))大人（男）1名@12,000大人（女）1名@12,000子供Ａ1名@12,000小学生子供Ｂ1名@12,000小児（食事布団あり）子供Ｂ1名@0小児（食事布団なし）子供Ｃ1名@3,000小児（食事のみ）子供Ｄ1名@10,000小児（布団のみ）07月24日24(純和風客室(バスルーム無し))大人（男）1名@12,000大人（女）1名@12,000子供Ａ1名@12,000小学生子供Ｂ1名@12,000小児（食事布団あり）子供Ｂ1名@0小児（食事布団なし）子供Ｃ1名@3,000小児（食事のみ）子供Ｄ1名@10,000小児（布団のみ）24(純和風客室(バスルーム無し))大人（男）1名@12,000大人（女）1名@12,000子供Ａ1名@12,000小学生子供Ｂ1名@12,000小児（食事布団あり）子供Ｂ1名@0小児（食事布団なし）子供Ｃ1名@3,000小児（食事のみ）子供Ｄ1名@10,000小児（布団のみ）宿泊料金計：\\366,000オプション：07月22日特選会席料理4個@12,000お土産（陣屋どらやき　6個入）1個@960お土産（やまと豚の桜味噌漬け13個@1,575お土産（やまと豚の桜味噌漬け23個@3,150 オプション料金計：\\63,135合計料金：\\429,135【宿泊者への請求額】：\\429,135---------------------------------------------------------------------ご確認事項：○携帯電話番号[MobilePhoneNumber]：00-2345-6789○ご要望・ご質問：NroomsNnightsのテストのため取扱個所：予約プロ(88)TEL052-262-8041FAX052-262-8042---</TelegramData><PhoneNumber>01-2345-6789</PhoneNumber><Email>hiroyuki_morimoto@jinya-inn.com</Email>';
    	infoTravelXML += '<PostalCode>257-0001</PostalCode><Address>神奈川県秦野市鶴巻北</Address><TotalPaxManCount>4</TotalPaxManCount><BranchFaxNumber>052-262-8042</BranchFaxNumber><Version>2.0</Version><AccommodationId>'+shopCode+'</AccommodationId></Basic><Allotment><AssignDiv>1</AssignDiv><GenderDiv>1</GenderDiv><HandleDiv>1</HandleDiv><RsvUserDiv>0</RsvUserDiv><UseDiv>0</UseDiv></Allotment><Option><OptionDate>2013-07-22</OptionDate><OptionCode>33</OptionCode><Name>特選会席料理</Name><OptionCount>4</OptionCount><OptionRate>12000</OptionRate></Option><Option><OptionDate>2013-07-22</OptionDate><Name>お土産（陣屋どらやき　6個入）</Name><OptionCount>1</OptionCount><OptionRate>960</OptionRate></Option><Option><OptionDate>2013-07-22</OptionDate><Name>お土産（やまと豚の桜味噌漬け10枚入）</Name><OptionCount>3</OptionCount><OptionRate>1575</OptionRate></Option><Option><OptionDate>2013-07-22</OptionDate><Name>お土産（やまと豚の桜味噌漬け20枚入）</Name><OptionCount>3</OptionCount><OptionRate>3150</OptionRate></Option><RoomAndRoomRateInformation><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount><RoomChildA70Request>小学生</RoomChildA70Request><RoomChildB50Request>小児（食事布団あり）小児（食事布団なし）</RoomChildB50Request><RoomChildC30Request>小児（食事のみ）</RoomChildC30Request><RoomChildDNoneRequest>小児（布団のみ）</RoomChildDNoneRequest><RoomTypeAgent>88</RoomTypeAgent><RoomFrame>--</RoomFrame><NetRmTypeGroupCode>49</NetRmTypeGroupCode><PlanGroupCode>---</PlanGroupCode></RoomInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee><PerMaleRate>12000</PerMaleRate><PerFemaleRate>12000</PerFemaleRate><RoomRatePaxMaleCount>1</RoomRatePaxMaleCount><RoomRatePaxFemaleCount>1</RoomRatePaxFemaleCount><RoomRateChildA70Count>1</RoomRateChildA70Count><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildC30Count>1</RoomRateChildC30Count><RoomRateChildDNoneCount>1</RoomRateChildDNoneCount><RoomRateChildA70Request>小学生</RoomRateChildA70Request><RoomRateChildB50Request>小児（食事布団あり）</RoomRateChildB50Request><RoomRateChildC30Request>小児（食事のみ）</RoomRateChildC30Request><RoomRateChildDNoneRequest>小児（布団のみ）</RoomRateChildDNoneRequest></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerChildB50Rate>0</PerChildB50Rate><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildB50Request>小児（食事布団なし）</RoomRateChildB50Request></RoomRateInformation></RoomAndRoomRateInformation><RoomAndRoomRateInformation><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount><RoomChildA70Request>小学生</RoomChildA70Request><RoomChildB50Request>小児（食事布団あり）小児（食事布団なし）</RoomChildB50Request>';
    	infoTravelXML += '<RoomChildC30Request>小児（食事のみ）</RoomChildC30Request><RoomChildDNoneRequest>小児（布団のみ）</RoomChildDNoneRequest><RoomTypeAgent>88</RoomTypeAgent><RoomFrame>--</RoomFrame><NetRmTypeGroupCode>49</NetRmTypeGroupCode><PlanGroupCode>---</PlanGroupCode></RoomInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee><PerMaleRate>12000</PerMaleRate><PerFemaleRate>12000</PerFemaleRate><RoomRatePaxMaleCount>1</RoomRatePaxMaleCount><RoomRatePaxFemaleCount>1</RoomRatePaxFemaleCount><RoomRateChildA70Count>1</RoomRateChildA70Count><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildC30Count>1</RoomRateChildC30Count><RoomRateChildDNoneCount>1</RoomRateChildDNoneCount><RoomRateChildA70Request>小学生</RoomRateChildA70Request><RoomRateChildB50Request>小児（食事布団あり）</RoomRateChildB50Request><RoomRateChildC30Request>小児（食事のみ）</RoomRateChildC30Request><RoomRateChildDNoneRequest>小児（布団のみ）</RoomRateChildDNoneRequest></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerChildB50Rate>0</PerChildB50Rate><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildB50Request>小児（食事布団なし）</RoomRateChildB50Request></RoomRateInformation></RoomAndRoomRateInformation><RoomAndRoomRateInformation><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount><RoomChildA70Request>小学生</RoomChildA70Request><RoomChildB50Request>小児（食事布団あり）小児（食事布団なし）</RoomChildB50Request><RoomChildC30Request>小児（食事のみ）</RoomChildC30Request><RoomChildDNoneRequest>小児（布団のみ）</RoomChildDNoneRequest><RoomTypeAgent>88</RoomTypeAgent><RoomFrame>--</RoomFrame><NetRmTypeGroupCode>49</NetRmTypeGroupCode><PlanGroupCode>---</PlanGroupCode></RoomInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee><PerMaleRate>12000</PerMaleRate><PerFemaleRate>12000</PerFemaleRate><RoomRatePaxMaleCount>1</RoomRatePaxMaleCount><RoomRatePaxFemaleCount>1</RoomRatePaxFemaleCount><RoomRateChildA70Count>1</RoomRateChildA70Count><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildC30Count>1</RoomRateChildC30Count><RoomRateChildDNoneCount>1</RoomRateChildDNoneCount><RoomRateChildA70Request>小学生</RoomRateChildA70Request><RoomRateChildB50Request>小児（食事布団あり）</RoomRateChildB50Request><RoomRateChildC30Request>小児（食事のみ）</RoomRateChildC30Request><RoomRateChildDNoneRequest>小児（布団のみ）</RoomRateChildDNoneRequest></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerChildB50Rate>0</PerChildB50Rate><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildB50Request>小児（食事布団なし）</RoomRateChildB50Request></RoomRateInformation></RoomAndRoomRateInformation><RoomAndRoomRateInformation><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount><RoomChildA70Request>小学生</RoomChildA70Request><RoomChildB50Request>小児（食事布団あり）小児（食事布団なし）</RoomChildB50Request><RoomChildC30Request>小児（食事のみ）</RoomChildC30Request><RoomChildDNoneRequest>小児（布団のみ）</RoomChildDNoneRequest><RoomTypeAgent>88</RoomTypeAgent><RoomFrame>--</RoomFrame><NetRmTypeGroupCode>49</NetRmTypeGroupCode><PlanGroupCode>---</PlanGroupCode></RoomInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee><PerMaleRate>12000</PerMaleRate><PerFemaleRate>12000</PerFemaleRate><RoomRatePaxMaleCount>1</RoomRatePaxMaleCount><RoomRatePaxFemaleCount>1</RoomRatePaxFemaleCount><RoomRateChildA70Count>1</RoomRateChildA70Count><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildC30Count>1</RoomRateChildC30Count><RoomRateChildDNoneCount>1</RoomRateChildDNoneCount><RoomRateChildA70Request>小学生</RoomRateChildA70Request><RoomRateChildB50Request>小児（食事布団あり）</RoomRateChildB50Request><RoomRateChildC30Request>小児（食事のみ）</RoomRateChildC30Request><RoomRateChildDNoneRequest>小児（布団のみ）</RoomRateChildDNoneRequest></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerChildB50Rate>0</PerChildB50Rate><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildB50Request>小児（食事布団なし）</RoomRateChildB50Request></RoomRateInformation></RoomAndRoomRateInformation><RoomAndRoomRateInformation><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount><RoomChildA70Request>小学生</RoomChildA70Request><RoomChildB50Request>小児（食事布団あり）小児（食事布団なし）</RoomChildB50Request><RoomChildC30Request>小児（食事のみ）</RoomChildC30Request><RoomChildDNoneRequest>小児（布団のみ）</RoomChildDNoneRequest><RoomTypeAgent>88</RoomTypeAgent><RoomFrame>--</RoomFrame><NetRmTypeGroupCode>49</NetRmTypeGroupCode><PlanGroupCode>---</PlanGroupCode></RoomInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee><PerMaleRate>12000</PerMaleRate><PerFemaleRate>12000</PerFemaleRate><RoomRatePaxMaleCount>1</RoomRatePaxMaleCount><RoomRatePaxFemaleCount>1</RoomRatePaxFemaleCount><RoomRateChildA70Count>1</RoomRateChildA70Count><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildC30Count>1</RoomRateChildC30Count><RoomRateChildDNoneCount>1</RoomRateChildDNoneCount><RoomRateChildA70Request>小学生</RoomRateChildA70Request><RoomRateChildB50Request>小児（食事布団あり）</RoomRateChildB50Request><RoomRateChildC30Request>小児（食事のみ）</RoomRateChildC30Request><RoomRateChildDNoneRequest>小児（布団のみ）</RoomRateChildDNoneRequest></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerChildB50Rate>0</PerChildB50Rate><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildB50Request>小児（食事布団なし）</RoomRateChildB50Request></RoomRateInformation></RoomAndRoomRateInformation><RoomAndRoomRateInformation><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount><RoomChildA70Request>小学生</RoomChildA70Request><RoomChildB50Request>小児（食事布団あり）小児（食事布団なし）</RoomChildB50Request><RoomChildC30Request>小児（食事のみ）</RoomChildC30Request><RoomChildDNoneRequest>小児（布団のみ）</RoomChildDNoneRequest><RoomTypeAgent>88</RoomTypeAgent><RoomFrame>--</RoomFrame><NetRmTypeGroupCode>49</NetRmTypeGroupCode><PlanGroupCode>---</PlanGroupCode></RoomInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee><PerMaleRate>12000</PerMaleRate><PerFemaleRate>12000</PerFemaleRate><RoomRatePaxMaleCount>1</RoomRatePaxMaleCount><RoomRatePaxFemaleCount>1</RoomRatePaxFemaleCount><RoomRateChildA70Count>1</RoomRateChildA70Count><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildC30Count>1</RoomRateChildC30Count><RoomRateChildDNoneCount>1</RoomRateChildDNoneCount><RoomRateChildA70Request>小学生</RoomRateChildA70Request><RoomRateChildB50Request>小児（食事布団あり）</RoomRateChildB50Request><RoomRateChildC30Request>小児（食事のみ）</RoomRateChildC30Request><RoomRateChildDNoneRequest>小児（布団のみ）</RoomRateChildDNoneRequest></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerChildB50Rate>0</PerChildB50Rate><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildB50Request>小児（食事布団なし）</RoomRateChildB50Request></RoomRateInformation></RoomAndRoomRateInformation><OtherInfo><GuestRequest>○携帯電話番号[MobilePhoneNumber]：00-2345-6789○ご要望・ご質問：NroomsNnightsのテストのため</GuestRequest></OtherInfo></RisaplsCommonInformation><AgentNativeInformation><Extend><AmountClaimed>429135</AmountClaimed></Extend><Extendmytrip><SettlementDiv>4</SettlementDiv></Extendmytrip></AgentNativeInformation></RisaplsInformation></AllotmentBookingReport>';
    	String rs = WS_BookingEngineService.createBookingService(infoTravelXML);
    	System.assert(rs.contains('<IsSuccess>true</IsSuccess>'),rs);
    	// USERにより、上記データを取得する
    	String UserId = rs.substringBetween('<UserID>','</UserID>');
    	String DataId = rs.substringBetween('<PmsDataId>','</PmsDataId>');
    	
    	String reqXml = '<GetBookingListRQ><CommonRequest><ShopCode>'+shopCode+'</ShopCode></CommonRequest><ExtractionCondition><UserID>'+UserId+'</UserID><SearchDurationFrom>19000401</SearchDurationFrom><SearchDurationTo>20170405</SearchDurationTo><TravelAgencyBookingNumber></TravelAgencyBookingNumber><PmsDataId>'+DataId+'</PmsDataId></ExtractionCondition></GetBookingListRQ>';
    	rs = WS_BookingEngineService.getbookinglistSerivce(reqXml);
    	System.assert(rs.contains('<IsSuccess>true</IsSuccess>'),rs);
    	
	}
	// 7_1. 予約情報取得
    static testMethod void getbookinglistSerivceTest_BATH() {
		ShopInformation__c shop = TestCommon.createShopInfo();
		List<AccountMaster__c> productMst = TestCommon.createProductMst(1);
    	CommDefine__c comm = TestCommon.createCommDefine();
    	// 入汤税设定Mode
    	comm.AccountRenpakuBathTaxAutoSetupFlg__c = true;
    	comm.AccountBathTaxAutoSetupFlg2__c = CommConst.PLAN_BATHTAXAUTOSET_3;
        comm.AccountBathTaxCode__c = productMst[0].Field3__c;
        comm.ReducedTaxRateFlg__c = true;
        comm.ReducedTaxPlanDetailCalFlg__c = true;
        comm.OptionPlanSetMode__c = CommConst.OPTION_MODE_ON;
        comm.LeadSplitDivCode__c = CommConst.APPOTION_LEADSPLIT_DIV_CODE_SPLIT;
		update comm; 
		Datetime startDate = system.now();
		LeadIndex__c item = new LeadIndex__c(
    		ID__c = String.valueOf('101731864'),
    		Nights__c = 1,
     		EntryTime__c = '10:00',
    		EntryDate__c = startDate.date(),
    		DepartureTime__c = '15:30',
    		DepartureDate__c = startDate.addDays(1).date(),
            EventSource__c = 'FromTravelAgency',
            StockLogicProcessFlg__c = true,
            LeadName__c = '123',
			APPNAME__c = CommConst.BI_PROCESS_TYPE.WS.name(),
			Rooms__c = 1
    	);
        insert item;
        Leadindex__c subItem = new LeadIndex__c(ParentLeadIndxRef__c = item.id);
        insert subItem;

        TypeOfRooms__c typeItem = new TypeOfRooms__c(
            Name = '純和風客室(バスルーム無し)',
            RoomTypeCode__c = '1',
            MaxRooms__c = 99); 
        insert typeItem;

        Room__c roomItem = new Room__c(
    		Name = '部屋テスト' + CommUtils.getRandom(6),
    		CapacityHaku__c = 4,
    		Capacity__c = 2,
    		Area__c = '本館',
    		Floor__c = '1F',
    		UseOfRoom__c = '客室', 
    		heyadashiryouryou__c = 40000,
    		TypeRoomRef__c = typeItem.Id,
    		heyadashiryou__c = 25000);
        insert roomItem;
        
        Account acc = new Account(AccountType__c = CommConst.ACCOUNT_TYPE_TRAVEL,SalesOfficeCompanyCodeTL__c = '88',SalesOfficeCompanyCodeTA__c = '88',name='test1',SalesOfficeCompanyType__c = '1');
        insert acc;

        Lead__c lead = new lead__c(leadindexref__c = item.id, name='123',rroom__c = roomItem.id,ReservedDate__c = system.today(),EntryTime__c = system.today(),BookingDataID__c = '101731864',LeadIndexSubId__c = subItem.id,StayPersons__c = 3,SalesOfficeInfoRef__c = acc.id);
		insert lead;

		Plan__c plan = createPlanHadHoomZero('zhtest001');
        plan.client__c = acc.id;
        plan.PackageCode__c = '186';
        update plan;
		
    	String shopCode = shop.ShopCode__c;
		createConfigDoc(shopCode,false,plan,true);

		insert new StockChangeHisotry__c(
            StockChangeCnt__c = -1,
            CreateSource__c = CommConst.BI_PROCESS_TYPE.TL.name(),
            AgtRef__c = lead.SalesOfficeInfoRef__c,
            StockChangeDate__c = lead.EntryTime__c.date(),	// 到着日ー＞調整日付
            TypeOfRoomRef__c = typeItem.id,
            LeadRef__c = lead.id
		);
		
		String infoTravelXML = '<?xml version="1.0" encoding="UTF-8" standalone="yes"?><AllotmentBookingReport><TransactionType><DataID>101731864</DataID><DataFrom>FromTravelAgency</DataFrom><DataClassification>ModificationReport</DataClassification><SystemDate>2013-07-09</SystemDate></TransactionType><AccommodationInformation><AccommodationName>元湯陣屋</AccommodationName><AccommodationCode>14000010</AccommodationCode></AccommodationInformation><SalesOfficeInformation><SalesOfficeCompanyName>予約プロ</SalesOfficeCompanyName><SalesOfficeName>予約プロ</SalesOfficeName><SalesOfficeCode>88</SalesOfficeCode><SalesOfficePhoneNumber>052-262-8041</SalesOfficePhoneNumber></SalesOfficeInformation><BasicInformation><TravelAgencyBookingNumber>A001781590</TravelAgencyBookingNumber><TravelAgencyBookingDate>2013-07-09</TravelAgencyBookingDate><TravelAgencyBookingTime>23:47:14</TravelAgencyBookingTime><TravelAgencyReportNumber>00000051</TravelAgencyReportNumber><GuestOrGroupNameSingleByte>ﾃｽﾄﾖﾔｸ_</GuestOrGroupNameSingleByte><GuestOrGroupNameKanjiName>テスト予約No.2013/07/09_</GuestOrGroupNameKanjiName><CheckInDate>2013-07-22</CheckInDate><CheckInTime>15:30:00</CheckInTime><CheckOutDate>2013-07-25</CheckOutDate><Nights>3</Nights><TotalRoomCount>2</TotalRoomCount><GrandTotalPaxCount>14</GrandTotalPaxCount><TotalPaxMaleCount>2</TotalPaxMaleCount><TotalPaxFemaleCount>2</TotalPaxFemaleCount><TotalChildA70Count>2</TotalChildA70Count><TotalChildB50Count>4</TotalChildB50Count><TotalChildC30Count>2</TotalChildC30Count><TotalChildDNoneCount>2</TotalChildDNoneCount><PackagePlanName>【１泊朝食付】朝膳朝食付きプラン　チェックイン24:00までOK！</PackagePlanName><PackagePlanCode>3333</PackagePlanCode><MealCondition>1nightBreakfast</MealCondition><SpecificMealCondition>NoneSpecified</SpecificMealCondition><OtherServiceInformation>○携帯電話番号[MobilePhoneNumber]：00-2345-6789○ご要望・ご質問：NroomsNnightsのテストのため</OtherServiceInformation></BasicInformation><BasicRateInformation><RoomRateOrPersonalRate>PersonalRate</RoomRateOrPersonalRate><TaxServiceFee>IncludingServiceAndTax</TaxServiceFee><TotalAccommodationCharge>429135</TotalAccommodationCharge></BasicRateInformation><RoomAndGuestInformation><RoomAndGuestList><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount></RoomInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerChildB50Rate>0</PerChildB50Rate></RoomRateInformation></RoomAndGuestList><RoomAndGuestList><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>2</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount></RoomInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerChildB50Rate>0</PerChildB50Rate></RoomRateInformation></RoomAndGuestList><RoomAndGuestList><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount></RoomInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerChildB50Rate>0</PerChildB50Rate></RoomRateInformation></RoomAndGuestList><RoomAndGuestList><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>2</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount></RoomInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerChildB50Rate>0</PerChildB50Rate></RoomRateInformation></RoomAndGuestList><RoomAndGuestList><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount></RoomInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerChildB50Rate>0</PerChildB50Rate></RoomRateInformation></RoomAndGuestList><RoomAndGuestList><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>1</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount></RoomInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerChildB50Rate>0</PerChildB50Rate></RoomRateInformation></RoomAndGuestList></RoomAndGuestInformation><RisaplsInformation><RisaplsCommonInformation>';
		// infoTravelXML += '<BasicRate><TotalAccomodationServiceCharge>0</TotalAccomodationServiceCharge><PointsDiscountList>      </BasicRate>';//  <PointsDiv>2</PointsDiv>    <PointsDiscountName>現ポイント</PointsDiscountName>    <PointsDiscount>200</PointsDiscount></PointsDiscountList> 
		infoTravelXML += '<Basic><SalesOfficeCompanyCode>88</SalesOfficeCompanyCode><TelegramDiv></TelegramDiv><RisaplsDataID></RisaplsDataID><RisaplsTelegramNumber></RisaplsTelegramNumber>';
    	infoTravelXML += '<TelegramData>予約通知予約プロSNT-NET07-0923:49(88)予約番号：A001781590NO.00000051元湯陣屋様(14000010)宿泊者情報：テスト予約No.2013/07/09_TEL:01-2345-6789ﾃｽﾄﾖﾔｸ_Mail:hiroyuki_morimoto@jinya-inn.com住所:(〒257-0001)神奈川県秦野市鶴巻北inn.com住所:(〒257-0001)神奈川県秦野市鶴巻北プラン名：【１泊朝食付】朝膳朝食付きプラン　チェックイン24:00までOK！(185)2013年07月22日から3泊朝食付サ込税込入込方法：チェックイン時間：15:30人員総数：14人内訳：(男)2名+(女)2名+(Ａ)2名+(Ｂ)4名+(Ｃ)2名+(Ｄ)2名客室総数：2室07月22日24(純和風客室(バスルーム無し))大人（男）1名@12,000大人（女）1名@12,000子供Ａ1名@12,000小学生子供Ｂ1名@12,000小児（食事布団あり）子供Ｂ1名@0小児（食事布団なし）子供Ｃ1名@3,000小児（食事のみ）子供Ｄ1名@10,000小児（布団のみ）24(純和風客室(バスルーム無し))大人（男）1名@12,000大人（女）1名@12,000子供Ａ1名@12,000小学生子供Ｂ1名@12,000小児（食事布団あり）子供Ｂ1名@0小児（食事布団なし）子供Ｃ1名@3,000小児（食事のみ）子供Ｄ1名@10,000小児（布団のみ）07月23日24(純和風客室(バスルーム無し))大人（男）1名@12,000大人（女）1名@12,000子供Ａ1名@12,000小学生子供Ｂ1名@12,000小児（食事布団あり）子供Ｂ1名@0小児（食事布団なし）子供Ｃ1名@3,000小児（食事のみ）子供Ｄ1名@10,000小児（布団のみ）24(純和風客室(バスルーム無し))大人（男）1名@12,000大人（女）1名@12,000子供Ａ1名@12,000小学生子供Ｂ1名@12,000小児（食事布団あり）子供Ｂ1名@0小児（食事布団なし）子供Ｃ1名@3,000小児（食事のみ）子供Ｄ1名@10,000小児（布団のみ）07月24日24(純和風客室(バスルーム無し))大人（男）1名@12,000大人（女）1名@12,000子供Ａ1名@12,000小学生子供Ｂ1名@12,000小児（食事布団あり）子供Ｂ1名@0小児（食事布団なし）子供Ｃ1名@3,000小児（食事のみ）子供Ｄ1名@10,000小児（布団のみ）24(純和風客室(バスルーム無し))大人（男）1名@12,000大人（女）1名@12,000子供Ａ1名@12,000小学生子供Ｂ1名@12,000小児（食事布団あり）子供Ｂ1名@0小児（食事布団なし）子供Ｃ1名@3,000小児（食事のみ）子供Ｄ1名@10,000小児（布団のみ）宿泊料金計：\\366,000オプション：07月22日特選会席料理4個@12,000お土産（陣屋どらやき　6個入）1個@960お土産（やまと豚の桜味噌漬け13個@1,575お土産（やまと豚の桜味噌漬け23個@3,150 オプション料金計：\\63,135合計料金：\\429,135【宿泊者への請求額】：\\429,135---------------------------------------------------------------------ご確認事項：○携帯電話番号[MobilePhoneNumber]：00-2345-6789○ご要望・ご質問：NroomsNnightsのテストのため取扱個所：予約プロ(88)TEL052-262-8041FAX052-262-8042---</TelegramData><PhoneNumber>01-2345-6789</PhoneNumber><Email>hiroyuki_morimoto@jinya-inn.com</Email>';
		infoTravelXML += '<PostalCode>257-0001</PostalCode><Address>神奈川県秦野市鶴巻北</Address><TotalPaxManCount>4</TotalPaxManCount><BranchFaxNumber>052-262-8042</BranchFaxNumber><Version>2.0</Version><AccommodationId>'+shopCode+'</AccommodationId>';
		infoTravelXML += '<TotalAccomodationServiceCharge>0</TotalAccomodationServiceCharge> </Basic><Allotment><AssignDiv>1</AssignDiv><GenderDiv>1</GenderDiv><HandleDiv>1</HandleDiv><RsvUserDiv>0</RsvUserDiv><UseDiv>0</UseDiv></Allotment><Option><OptionDate>2013-07-22</OptionDate><OptionCode>33</OptionCode><Name>特選会席料理</Name><OptionCount>4</OptionCount><OptionRate>12000</OptionRate></Option><Option><OptionDate>2013-07-22</OptionDate><Name>お土産（陣屋どらやき　6個入）</Name><OptionCount>1</OptionCount><OptionRate>960</OptionRate></Option><Option><OptionDate>2013-07-22</OptionDate><Name>お土産（やまと豚の桜味噌漬け10枚入）</Name><OptionCount>3</OptionCount><OptionRate>1575</OptionRate></Option><Option><OptionDate>2013-07-22</OptionDate><Name>お土産（やまと豚の桜味噌漬け20枚入）</Name><OptionCount>3</OptionCount><OptionRate>3150</OptionRate></Option><RoomAndRoomRateInformation><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount><RoomChildA70Request>小学生</RoomChildA70Request><RoomChildB50Request>小児（食事布団あり）小児（食事布団なし）</RoomChildB50Request><RoomChildC30Request>小児（食事のみ）</RoomChildC30Request><RoomChildDNoneRequest>小児（布団のみ）</RoomChildDNoneRequest><RoomTypeAgent>88</RoomTypeAgent><RoomFrame>--</RoomFrame><NetRmTypeGroupCode>49</NetRmTypeGroupCode><PlanGroupCode>---</PlanGroupCode></RoomInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee><PerMaleRate>12000</PerMaleRate><PerFemaleRate>12000</PerFemaleRate><RoomRatePaxMaleCount>1</RoomRatePaxMaleCount><RoomRatePaxFemaleCount>1</RoomRatePaxFemaleCount><RoomRateChildA70Count>1</RoomRateChildA70Count><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildC30Count>1</RoomRateChildC30Count><RoomRateChildDNoneCount>1</RoomRateChildDNoneCount><RoomRateChildA70Request>小学生</RoomRateChildA70Request><RoomRateChildB50Request>小児（食事布団あり）</RoomRateChildB50Request><RoomRateChildC30Request>小児（食事のみ）</RoomRateChildC30Request><RoomRateChildDNoneRequest>小児（布団のみ）</RoomRateChildDNoneRequest></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerChildB50Rate>0</PerChildB50Rate><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildB50Request>小児（食事布団なし）</RoomRateChildB50Request></RoomRateInformation></RoomAndRoomRateInformation><RoomAndRoomRateInformation><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount><RoomChildA70Request>小学生</RoomChildA70Request><RoomChildB50Request>小児（食事布団あり）小児（食事布団なし）</RoomChildB50Request>';
    	infoTravelXML += '<RoomChildC30Request>小児（食事のみ）</RoomChildC30Request><RoomChildDNoneRequest>小児（布団のみ）</RoomChildDNoneRequest><RoomTypeAgent>88</RoomTypeAgent><RoomFrame>--</RoomFrame><NetRmTypeGroupCode>49</NetRmTypeGroupCode><PlanGroupCode>---</PlanGroupCode></RoomInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee><PerMaleRate>12000</PerMaleRate><PerFemaleRate>12000</PerFemaleRate><RoomRatePaxMaleCount>1</RoomRatePaxMaleCount><RoomRatePaxFemaleCount>1</RoomRatePaxFemaleCount><RoomRateChildA70Count>1</RoomRateChildA70Count><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildC30Count>1</RoomRateChildC30Count><RoomRateChildDNoneCount>1</RoomRateChildDNoneCount><RoomRateChildA70Request>小学生</RoomRateChildA70Request><RoomRateChildB50Request>小児（食事布団あり）</RoomRateChildB50Request><RoomRateChildC30Request>小児（食事のみ）</RoomRateChildC30Request><RoomRateChildDNoneRequest>小児（布団のみ）</RoomRateChildDNoneRequest></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerChildB50Rate>0</PerChildB50Rate><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildB50Request>小児（食事布団なし）</RoomRateChildB50Request></RoomRateInformation></RoomAndRoomRateInformation><RoomAndRoomRateInformation><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount><RoomChildA70Request>小学生</RoomChildA70Request><RoomChildB50Request>小児（食事布団あり）小児（食事布団なし）</RoomChildB50Request><RoomChildC30Request>小児（食事のみ）</RoomChildC30Request><RoomChildDNoneRequest>小児（布団のみ）</RoomChildDNoneRequest><RoomTypeAgent>88</RoomTypeAgent><RoomFrame>--</RoomFrame><NetRmTypeGroupCode>49</NetRmTypeGroupCode><PlanGroupCode>---</PlanGroupCode></RoomInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee><PerMaleRate>12000</PerMaleRate><PerFemaleRate>12000</PerFemaleRate><RoomRatePaxMaleCount>1</RoomRatePaxMaleCount><RoomRatePaxFemaleCount>1</RoomRatePaxFemaleCount><RoomRateChildA70Count>1</RoomRateChildA70Count><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildC30Count>1</RoomRateChildC30Count><RoomRateChildDNoneCount>1</RoomRateChildDNoneCount><RoomRateChildA70Request>小学生</RoomRateChildA70Request><RoomRateChildB50Request>小児（食事布団あり）</RoomRateChildB50Request><RoomRateChildC30Request>小児（食事のみ）</RoomRateChildC30Request><RoomRateChildDNoneRequest>小児（布団のみ）</RoomRateChildDNoneRequest></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerChildB50Rate>0</PerChildB50Rate><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildB50Request>小児（食事布団なし）</RoomRateChildB50Request></RoomRateInformation></RoomAndRoomRateInformation><RoomAndRoomRateInformation><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount><RoomChildA70Request>小学生</RoomChildA70Request><RoomChildB50Request>小児（食事布団あり）小児（食事布団なし）</RoomChildB50Request><RoomChildC30Request>小児（食事のみ）</RoomChildC30Request><RoomChildDNoneRequest>小児（布団のみ）</RoomChildDNoneRequest><RoomTypeAgent>88</RoomTypeAgent><RoomFrame>--</RoomFrame><NetRmTypeGroupCode>49</NetRmTypeGroupCode><PlanGroupCode>---</PlanGroupCode></RoomInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee><PerMaleRate>12000</PerMaleRate><PerFemaleRate>12000</PerFemaleRate><RoomRatePaxMaleCount>1</RoomRatePaxMaleCount><RoomRatePaxFemaleCount>1</RoomRatePaxFemaleCount><RoomRateChildA70Count>1</RoomRateChildA70Count><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildC30Count>1</RoomRateChildC30Count><RoomRateChildDNoneCount>1</RoomRateChildDNoneCount><RoomRateChildA70Request>小学生</RoomRateChildA70Request><RoomRateChildB50Request>小児（食事布団あり）</RoomRateChildB50Request><RoomRateChildC30Request>小児（食事のみ）</RoomRateChildC30Request><RoomRateChildDNoneRequest>小児（布団のみ）</RoomRateChildDNoneRequest></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerChildB50Rate>0</PerChildB50Rate><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildB50Request>小児（食事布団なし）</RoomRateChildB50Request></RoomRateInformation></RoomAndRoomRateInformation><RoomAndRoomRateInformation><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount><RoomChildA70Request>小学生</RoomChildA70Request><RoomChildB50Request>小児（食事布団あり）小児（食事布団なし）</RoomChildB50Request><RoomChildC30Request>小児（食事のみ）</RoomChildC30Request><RoomChildDNoneRequest>小児（布団のみ）</RoomChildDNoneRequest><RoomTypeAgent>88</RoomTypeAgent><RoomFrame>--</RoomFrame><NetRmTypeGroupCode>49</NetRmTypeGroupCode><PlanGroupCode>---</PlanGroupCode></RoomInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee><PerMaleRate>12000</PerMaleRate><PerFemaleRate>12000</PerFemaleRate><RoomRatePaxMaleCount>1</RoomRatePaxMaleCount><RoomRatePaxFemaleCount>1</RoomRatePaxFemaleCount><RoomRateChildA70Count>1</RoomRateChildA70Count><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildC30Count>1</RoomRateChildC30Count><RoomRateChildDNoneCount>1</RoomRateChildDNoneCount><RoomRateChildA70Request>小学生</RoomRateChildA70Request><RoomRateChildB50Request>小児（食事布団あり）</RoomRateChildB50Request><RoomRateChildC30Request>小児（食事のみ）</RoomRateChildC30Request><RoomRateChildDNoneRequest>小児（布団のみ）</RoomRateChildDNoneRequest></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerChildB50Rate>0</PerChildB50Rate><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildB50Request>小児（食事布団なし）</RoomRateChildB50Request></RoomRateInformation></RoomAndRoomRateInformation><RoomAndRoomRateInformation><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount><RoomChildA70Request>小学生</RoomChildA70Request><RoomChildB50Request>小児（食事布団あり）小児（食事布団なし）</RoomChildB50Request><RoomChildC30Request>小児（食事のみ）</RoomChildC30Request><RoomChildDNoneRequest>小児（布団のみ）</RoomChildDNoneRequest><RoomTypeAgent>88</RoomTypeAgent><RoomFrame>--</RoomFrame><NetRmTypeGroupCode>49</NetRmTypeGroupCode><PlanGroupCode>---</PlanGroupCode></RoomInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee><PerMaleRate>12000</PerMaleRate><PerFemaleRate>12000</PerFemaleRate><RoomRatePaxMaleCount>1</RoomRatePaxMaleCount><RoomRatePaxFemaleCount>1</RoomRatePaxFemaleCount><RoomRateChildA70Count>1</RoomRateChildA70Count><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildC30Count>1</RoomRateChildC30Count><RoomRateChildDNoneCount>1</RoomRateChildDNoneCount><RoomRateChildA70Request>小学生</RoomRateChildA70Request><RoomRateChildB50Request>小児（食事布団あり）</RoomRateChildB50Request><RoomRateChildC30Request>小児（食事のみ）</RoomRateChildC30Request><RoomRateChildDNoneRequest>小児（布団のみ）</RoomRateChildDNoneRequest></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerChildB50Rate>0</PerChildB50Rate><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildB50Request>小児（食事布団なし）</RoomRateChildB50Request></RoomRateInformation></RoomAndRoomRateInformation><Member><UserName>玄 志龍</UserName><UserKana>ｹﾞﾝ ｼﾘｭｳ</UserKana><UserMailAddr>ziontrek@gmail.com</UserMailAddr></Member><OtherInfo><GuestRequest>○携帯電話番号[MobilePhoneNumber]：00-2345-6789○ご要望・ご質問：NroomsNnightsのテストのため</GuestRequest></OtherInfo></RisaplsCommonInformation><AgentNativeInformation><Extend><AmountClaimed>429135</AmountClaimed></Extend><Extendmytrip><SettlementDiv>4</SettlementDiv></Extendmytrip></AgentNativeInformation></RisaplsInformation></AllotmentBookingReport>';
    	String rs = WS_BookingEngineService.createBookingService(infoTravelXML);
    	System.assert(rs.contains('<IsSuccess>true</IsSuccess>'),rs);
    	// USERにより、上記データを取得する
    	String UserId = rs.substringBetween('<UserID>','</UserID>');
    	String DataId = rs.substringBetween('<PmsDataId>','</PmsDataId>');
    	
    	String reqXml = '<GetBookingListRQ><CommonRequest><ShopCode>'+shopCode+'</ShopCode></CommonRequest><ExtractionCondition><UserID>'+UserId+'</UserID><SearchDurationFrom>19000401</SearchDurationFrom><SearchDurationTo>20170405</SearchDurationTo><TravelAgencyBookingNumber></TravelAgencyBookingNumber><PmsDataId>'+DataId+'</PmsDataId></ExtractionCondition></GetBookingListRQ>';
    	rs = WS_BookingEngineService.getbookinglistSerivce(reqXml);
    	System.assert(rs.contains('<IsSuccess>true</IsSuccess>'),rs);
    	
    }
    static testMethod void getbookinglistSerivceTest001(){
    	ShopInformation__c shop = TestCommon.createShopInfo();
    	//TestCommon.createConfigDoc();
    	Plan__c plan = TestCommon.createPlan();
    	String shopCode = shop.ShopCode__c;
    	TypeOfRooms__c typeOfRoom = TestCommon.createTypeOfRoom();
		List<Room__c> createRooms = TestCommon.createRooms(5, typeOfRoom.Id);
    	createConfigDoc(shopCode,false,plan);
    	String infoTravelXML = '<?xmlversion="1.0"encoding="UTF-8"standalone="yes"?><AllotmentBookingReport><TransactionType><DataFrom>FromTravelAgency</DataFrom><DataClassification>ModificationReport</DataClassification><SystemDate>2013-07-09</SystemDate></TransactionType><AccommodationInformation><AccommodationName>元湯陣屋</AccommodationName><AccommodationCode>14000010</AccommodationCode></AccommodationInformation><SalesOfficeInformation><SalesOfficeCompanyName>予約プロ</SalesOfficeCompanyName><SalesOfficeName>予約プロ</SalesOfficeName><SalesOfficeCode>88</SalesOfficeCode><SalesOfficePhoneNumber>052-262-8041</SalesOfficePhoneNumber></SalesOfficeInformation><BasicInformation><TravelAgencyBookingNumber>A001781590</TravelAgencyBookingNumber><TravelAgencyBookingDate>2013-07-09</TravelAgencyBookingDate><TravelAgencyBookingTime>23:47:14</TravelAgencyBookingTime><TravelAgencyReportNumber>00000051</TravelAgencyReportNumber><GuestOrGroupNameSingleByte>ﾃｽﾄﾖﾔｸ_</GuestOrGroupNameSingleByte><GuestOrGroupNameKanjiName>テスト予約No.2013/07/09_</GuestOrGroupNameKanjiName><CheckInDate>2013-07-22</CheckInDate><CheckInTime>15:30:00</CheckInTime><CheckOutDate>2013-07-25</CheckOutDate><Nights>3</Nights><TotalRoomCount>2</TotalRoomCount><GrandTotalPaxCount>14</GrandTotalPaxCount><TotalPaxMaleCount>2</TotalPaxMaleCount><TotalPaxFemaleCount>2</TotalPaxFemaleCount><TotalChildA70Count>2</TotalChildA70Count><TotalChildB50Count>4</TotalChildB50Count><TotalChildC30Count>2</TotalChildC30Count><TotalChildDNoneCount>2</TotalChildDNoneCount><PackagePlanName>【１泊朝食付】朝膳朝食付きプラン　チェックイン24:00までOK！</PackagePlanName><PackagePlanCode>3333</PackagePlanCode><MealCondition>1nightBreakfast</MealCondition><SpecificMealCondition>NoneSpecified</SpecificMealCondition><OtherServiceInformation>○携帯電話番号[MobilePhoneNumber]：00-2345-6789○ご要望・ご質問：NroomsNnightsのテストのため</OtherServiceInformation></BasicInformation><BasicRateInformation><RoomRateOrPersonalRate>PersonalRate</RoomRateOrPersonalRate><TaxServiceFee>IncludingServiceAndTax</TaxServiceFee><TotalAccommodationCharge>429135</TotalAccommodationCharge></BasicRateInformation><RoomAndGuestInformation><RoomAndGuestList><RoomInformation><RoomTypeCode>'+ typeOfRoom.RoomTypeCode__c + '</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount></RoomInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerChildB50Rate>0</PerChildB50Rate></RoomRateInformation></RoomAndGuestList><RoomAndGuestList><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>2</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount></RoomInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerChildB50Rate>0</PerChildB50Rate></RoomRateInformation></RoomAndGuestList><RoomAndGuestList><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount></RoomInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerChildB50Rate>0</PerChildB50Rate></RoomRateInformation></RoomAndGuestList><RoomAndGuestList><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>2</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount></RoomInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerChildB50Rate>0</PerChildB50Rate></RoomRateInformation></RoomAndGuestList><RoomAndGuestList><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount></RoomInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerChildB50Rate>0</PerChildB50Rate></RoomRateInformation></RoomAndGuestList><RoomAndGuestList><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>1</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount></RoomInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerChildB50Rate>0</PerChildB50Rate></RoomRateInformation></RoomAndGuestList></RoomAndGuestInformation><RisaplsInformation><RisaplsCommonInformation><Basic><SalesOfficeCompanyCode>88</SalesOfficeCompanyCode><TelegramDiv></TelegramDiv><RisaplsDataID></RisaplsDataID><RisaplsTelegramNumber></RisaplsTelegramNumber>';
    	infoTravelXML += '<PhoneNumber>01-2345-6789</PhoneNumber><Email>hiroyuki_morimoto@jinya-inn.com</Email>';
    	infoTravelXML += '<PostalCode>257-0001</PostalCode><Address>神奈川県秦野市鶴巻北</Address><TotalPaxManCount>4</TotalPaxManCount><BranchFaxNumber>052-262-8042</BranchFaxNumber><Version>2.0</Version><AccommodationId>'+shopCode+'</AccommodationId></Basic><Allotment><AssignDiv>1</AssignDiv><GenderDiv>1</GenderDiv><HandleDiv>1</HandleDiv><RsvUserDiv>0</RsvUserDiv><UseDiv>0</UseDiv></Allotment><Option><OptionDate>2013-07-22</OptionDate><OptionCode>33</OptionCode><Name>特選会席料理</Name><OptionCount>4</OptionCount><OptionRate>12000</OptionRate></Option><Option><OptionDate>2013-07-22</OptionDate><Name>お土産（陣屋どらやき　6個入）</Name><OptionCount>1</OptionCount><OptionRate>960</OptionRate></Option><Option><OptionDate>2013-07-22</OptionDate><Name>お土産（やまと豚の桜味噌漬け10枚入）</Name><OptionCount>3</OptionCount><OptionRate>1575</OptionRate></Option><Option><OptionDate>2013-07-22</OptionDate><Name>お土産（やまと豚の桜味噌漬け20枚入）</Name><OptionCount>3</OptionCount><OptionRate>3150</OptionRate></Option><RoomAndRoomRateInformation><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount><RoomChildA70Request>小学生</RoomChildA70Request><RoomChildB50Request>小児（食事布団あり）小児（食事布団なし）</RoomChildB50Request><RoomChildC30Request>小児（食事のみ）</RoomChildC30Request><RoomChildDNoneRequest>小児（布団のみ）</RoomChildDNoneRequest><RoomTypeAgent>88</RoomTypeAgent><RoomFrame>--</RoomFrame><NetRmTypeGroupCode>49</NetRmTypeGroupCode><PlanGroupCode>---</PlanGroupCode></RoomInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee><PerMaleRate>12000</PerMaleRate><PerFemaleRate>12000</PerFemaleRate><RoomRatePaxMaleCount>1</RoomRatePaxMaleCount><RoomRatePaxFemaleCount>1</RoomRatePaxFemaleCount><RoomRateChildA70Count>1</RoomRateChildA70Count><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildC30Count>1</RoomRateChildC30Count><RoomRateChildDNoneCount>1</RoomRateChildDNoneCount><RoomRateChildA70Request>小学生</RoomRateChildA70Request><RoomRateChildB50Request>小児（食事布団あり）</RoomRateChildB50Request><RoomRateChildC30Request>小児（食事のみ）</RoomRateChildC30Request><RoomRateChildDNoneRequest>小児（布団のみ）</RoomRateChildDNoneRequest></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerChildB50Rate>0</PerChildB50Rate><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildB50Request>小児（食事布団なし）</RoomRateChildB50Request></RoomRateInformation></RoomAndRoomRateInformation><RoomAndRoomRateInformation><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount><RoomChildA70Request>小学生</RoomChildA70Request><RoomChildB50Request>小児（食事布団あり）小児（食事布団なし）</RoomChildB50Request>';
    	infoTravelXML += '<RoomChildC30Request>小児（食事のみ）</RoomChildC30Request><RoomChildDNoneRequest>小児（布団のみ）</RoomChildDNoneRequest><RoomTypeAgent>88</RoomTypeAgent><RoomFrame>--</RoomFrame><NetRmTypeGroupCode>49</NetRmTypeGroupCode><PlanGroupCode>---</PlanGroupCode></RoomInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee><PerMaleRate>12000</PerMaleRate><PerFemaleRate>12000</PerFemaleRate><RoomRatePaxMaleCount>1</RoomRatePaxMaleCount><RoomRatePaxFemaleCount>1</RoomRatePaxFemaleCount><RoomRateChildA70Count>1</RoomRateChildA70Count><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildC30Count>1</RoomRateChildC30Count><RoomRateChildDNoneCount>1</RoomRateChildDNoneCount><RoomRateChildA70Request>小学生</RoomRateChildA70Request><RoomRateChildB50Request>小児（食事布団あり）</RoomRateChildB50Request><RoomRateChildC30Request>小児（食事のみ）</RoomRateChildC30Request><RoomRateChildDNoneRequest>小児（布団のみ）</RoomRateChildDNoneRequest></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerChildB50Rate>0</PerChildB50Rate><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildB50Request>小児（食事布団なし）</RoomRateChildB50Request></RoomRateInformation></RoomAndRoomRateInformation><RoomAndRoomRateInformation><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount><RoomChildA70Request>小学生</RoomChildA70Request><RoomChildB50Request>小児（食事布団あり）小児（食事布団なし）</RoomChildB50Request><RoomChildC30Request>小児（食事のみ）</RoomChildC30Request><RoomChildDNoneRequest>小児（布団のみ）</RoomChildDNoneRequest><RoomTypeAgent>88</RoomTypeAgent><RoomFrame>--</RoomFrame><NetRmTypeGroupCode>49</NetRmTypeGroupCode><PlanGroupCode>---</PlanGroupCode></RoomInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee><PerMaleRate>12000</PerMaleRate><PerFemaleRate>12000</PerFemaleRate><RoomRatePaxMaleCount>1</RoomRatePaxMaleCount><RoomRatePaxFemaleCount>1</RoomRatePaxFemaleCount><RoomRateChildA70Count>1</RoomRateChildA70Count><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildC30Count>1</RoomRateChildC30Count><RoomRateChildDNoneCount>1</RoomRateChildDNoneCount><RoomRateChildA70Request>小学生</RoomRateChildA70Request><RoomRateChildB50Request>小児（食事布団あり）</RoomRateChildB50Request><RoomRateChildC30Request>小児（食事のみ）</RoomRateChildC30Request><RoomRateChildDNoneRequest>小児（布団のみ）</RoomRateChildDNoneRequest></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerChildB50Rate>0</PerChildB50Rate><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildB50Request>小児（食事布団なし）</RoomRateChildB50Request></RoomRateInformation></RoomAndRoomRateInformation><RoomAndRoomRateInformation><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount><RoomChildA70Request>小学生</RoomChildA70Request><RoomChildB50Request>小児（食事布団あり）小児（食事布団なし）</RoomChildB50Request><RoomChildC30Request>小児（食事のみ）</RoomChildC30Request><RoomChildDNoneRequest>小児（布団のみ）</RoomChildDNoneRequest><RoomTypeAgent>88</RoomTypeAgent><RoomFrame>--</RoomFrame><NetRmTypeGroupCode>49</NetRmTypeGroupCode><PlanGroupCode>---</PlanGroupCode></RoomInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee><PerMaleRate>12000</PerMaleRate><PerFemaleRate>12000</PerFemaleRate><RoomRatePaxMaleCount>1</RoomRatePaxMaleCount><RoomRatePaxFemaleCount>1</RoomRatePaxFemaleCount><RoomRateChildA70Count>1</RoomRateChildA70Count><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildC30Count>1</RoomRateChildC30Count><RoomRateChildDNoneCount>1</RoomRateChildDNoneCount><RoomRateChildA70Request>小学生</RoomRateChildA70Request><RoomRateChildB50Request>小児（食事布団あり）</RoomRateChildB50Request><RoomRateChildC30Request>小児（食事のみ）</RoomRateChildC30Request><RoomRateChildDNoneRequest>小児（布団のみ）</RoomRateChildDNoneRequest></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerChildB50Rate>0</PerChildB50Rate><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildB50Request>小児（食事布団なし）</RoomRateChildB50Request></RoomRateInformation></RoomAndRoomRateInformation><RoomAndRoomRateInformation><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount><RoomChildA70Request>小学生</RoomChildA70Request><RoomChildB50Request>小児（食事布団あり）小児（食事布団なし）</RoomChildB50Request><RoomChildC30Request>小児（食事のみ）</RoomChildC30Request><RoomChildDNoneRequest>小児（布団のみ）</RoomChildDNoneRequest><RoomTypeAgent>88</RoomTypeAgent><RoomFrame>--</RoomFrame><NetRmTypeGroupCode>49</NetRmTypeGroupCode><PlanGroupCode>---</PlanGroupCode></RoomInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee><PerMaleRate>12000</PerMaleRate><PerFemaleRate>12000</PerFemaleRate><RoomRatePaxMaleCount>1</RoomRatePaxMaleCount><RoomRatePaxFemaleCount>1</RoomRatePaxFemaleCount><RoomRateChildA70Count>1</RoomRateChildA70Count><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildC30Count>1</RoomRateChildC30Count><RoomRateChildDNoneCount>1</RoomRateChildDNoneCount><RoomRateChildA70Request>小学生</RoomRateChildA70Request><RoomRateChildB50Request>小児（食事布団あり）</RoomRateChildB50Request><RoomRateChildC30Request>小児（食事のみ）</RoomRateChildC30Request><RoomRateChildDNoneRequest>小児（布団のみ）</RoomRateChildDNoneRequest></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerChildB50Rate>0</PerChildB50Rate><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildB50Request>小児（食事布団なし）</RoomRateChildB50Request></RoomRateInformation></RoomAndRoomRateInformation><RoomAndRoomRateInformation><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount><RoomChildA70Request>小学生</RoomChildA70Request><RoomChildB50Request>小児（食事布団あり）小児（食事布団なし）</RoomChildB50Request><RoomChildC30Request>小児（食事のみ）</RoomChildC30Request><RoomChildDNoneRequest>小児（布団のみ）</RoomChildDNoneRequest><RoomTypeAgent>88</RoomTypeAgent><RoomFrame>--</RoomFrame><NetRmTypeGroupCode>49</NetRmTypeGroupCode><PlanGroupCode>---</PlanGroupCode></RoomInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee><PerMaleRate>12000</PerMaleRate><PerFemaleRate>12000</PerFemaleRate><RoomRatePaxMaleCount>1</RoomRatePaxMaleCount><RoomRatePaxFemaleCount>1</RoomRatePaxFemaleCount><RoomRateChildA70Count>1</RoomRateChildA70Count><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildC30Count>1</RoomRateChildC30Count><RoomRateChildDNoneCount>1</RoomRateChildDNoneCount><RoomRateChildA70Request>小学生</RoomRateChildA70Request><RoomRateChildB50Request>小児（食事布団あり）</RoomRateChildB50Request><RoomRateChildC30Request>小児（食事のみ）</RoomRateChildC30Request><RoomRateChildDNoneRequest>小児（布団のみ）</RoomRateChildDNoneRequest></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerChildB50Rate>0</PerChildB50Rate><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildB50Request>小児（食事布団なし）</RoomRateChildB50Request></RoomRateInformation></RoomAndRoomRateInformation><OtherInfo><GuestRequest>○携帯電話番号[MobilePhoneNumber]：00-2345-6789○ご要望・ご質問：NroomsNnightsのテストのため</GuestRequest></OtherInfo></RisaplsCommonInformation><AgentNativeInformation><Extend><AmountClaimed>429135</AmountClaimed></Extend><Extendmytrip><SettlementDiv>4</SettlementDiv></Extendmytrip></AgentNativeInformation></RisaplsInformation></AllotmentBookingReport>';
    	String rs = WS_BookingEngineService.createBookingService(infoTravelXML);
    	
    	List<Leadindex__c>  leadIndexLst = [select id,ID__c from LeadIndex__c ];
    	infoTravelXML = '<?xmlversion="1.0"encoding="UTF-8"standalone="yes"?><AllotmentBookingReport><TransactionType><DataID>' + leadIndexLst[0].ID__c + '</DataID> <DataFrom>FromTravelAgency</DataFrom><DataClassification>ModificationReport</DataClassification><SystemDate>2013-07-09</SystemDate></TransactionType><AccommodationInformation><AccommodationName>元湯陣屋</AccommodationName><AccommodationCode>14000010</AccommodationCode></AccommodationInformation><SalesOfficeInformation><SalesOfficeCompanyName>予約プロ</SalesOfficeCompanyName><SalesOfficeName>予約プロ</SalesOfficeName><SalesOfficeCode>88</SalesOfficeCode><SalesOfficePhoneNumber>052-262-8041</SalesOfficePhoneNumber></SalesOfficeInformation><BasicInformation><TravelAgencyBookingNumber>A001781590</TravelAgencyBookingNumber><TravelAgencyBookingDate>2013-07-09</TravelAgencyBookingDate><TravelAgencyBookingTime>23:47:14</TravelAgencyBookingTime><TravelAgencyReportNumber>00000051</TravelAgencyReportNumber><GuestOrGroupNameSingleByte>ﾃｽﾄﾖﾔｸ_</GuestOrGroupNameSingleByte><GuestOrGroupNameKanjiName>テスト予約No.2013/07/09_</GuestOrGroupNameKanjiName><CheckInDate>2013-07-22</CheckInDate><CheckInTime>15:30:00</CheckInTime><CheckOutDate>2013-07-21</CheckOutDate><Nights>1</Nights><TotalRoomCount>2</TotalRoomCount><GrandTotalPaxCount>14</GrandTotalPaxCount><TotalPaxMaleCount>2</TotalPaxMaleCount><TotalPaxFemaleCount>2</TotalPaxFemaleCount><TotalChildA70Count>2</TotalChildA70Count><TotalChildB50Count>4</TotalChildB50Count><TotalChildC30Count>2</TotalChildC30Count><TotalChildDNoneCount>2</TotalChildDNoneCount><PackagePlanName>【１泊朝食付】朝膳朝食付きプラン　チェックイン24:00までOK！</PackagePlanName><PackagePlanCode>3333</PackagePlanCode><MealCondition>1nightBreakfast</MealCondition><SpecificMealCondition>NoneSpecified</SpecificMealCondition><OtherServiceInformation>○携帯電話番号[MobilePhoneNumber]：00-2345-6789○ご要望・ご質問：NroomsNnightsのテストのため</OtherServiceInformation></BasicInformation><BasicRateInformation><RoomRateOrPersonalRate>PersonalRate</RoomRateOrPersonalRate><TaxServiceFee>IncludingServiceAndTax</TaxServiceFee><TotalAccommodationCharge>429135</TotalAccommodationCharge></BasicRateInformation><RoomAndGuestInformation><RoomAndGuestList><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount></RoomInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerChildB50Rate>0</PerChildB50Rate></RoomRateInformation></RoomAndGuestList><RoomAndGuestList><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>2</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount></RoomInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerChildB50Rate>0</PerChildB50Rate></RoomRateInformation></RoomAndGuestList><RoomAndGuestList><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount></RoomInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerChildB50Rate>0</PerChildB50Rate></RoomRateInformation></RoomAndGuestList><RoomAndGuestList><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>2</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount></RoomInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerChildB50Rate>0</PerChildB50Rate></RoomRateInformation></RoomAndGuestList><RoomAndGuestList><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount></RoomInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerChildB50Rate>0</PerChildB50Rate></RoomRateInformation></RoomAndGuestList><RoomAndGuestList><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>1</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount></RoomInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerChildB50Rate>0</PerChildB50Rate></RoomRateInformation></RoomAndGuestList></RoomAndGuestInformation><RisaplsInformation>';
    	infoTravelXML += '<RisaplsCommonInformation><Member><UserName>藤本 左智子</UserName><UserKana>ふじもと さちこ</UserKana> <UserZip>156-0045</UserZip>  <UserAddr>東京都 世田谷区桜上水4-23-16 アルス桜上水402</UserAddr> <UserID>02902693</UserID> <UserType>会員</UserType> <UserGendar>1</UserGendar></Member><Basic><SalesOfficeCompanyCode>88</SalesOfficeCompanyCode><TelegramDiv></TelegramDiv><RisaplsDataID></RisaplsDataID><RisaplsTelegramNumber></RisaplsTelegramNumber>';
    	infoTravelXML += '<TelegramData>予約通知予約プロSNT-NET07-0923:49(88)予約番号：A001781590NO.00000051元湯陣屋様(14000010)宿泊者情報：テスト予約No.2013/07/09_TEL:01-2345-6789ﾃｽﾄﾖﾔｸ_Mail:hiroyuki_morimoto@jinya-inn.com住所:(〒257-0001)神奈川県秦野市鶴巻北inn.com住所:(〒257-0001)神奈川県秦野市鶴巻北プラン名：【１泊朝食付】朝膳朝食付きプラン　チェックイン24:00までOK！(185)2013年07月22日から3泊朝食付サ込税込入込方法：チェックイン時間：15:30人員総数：14人内訳：(男)2名+(女)2名+(Ａ)2名+(Ｂ)4名+(Ｃ)2名+(Ｄ)2名客室総数：2室07月22日24(純和風客室(バスルーム無し))大人（男）1名@12,000大人（女）1名@12,000子供Ａ1名@12,000小学生子供Ｂ1名@12,000小児（食事布団あり）子供Ｂ1名@0小児（食事布団なし）子供Ｃ1名@3,000小児（食事のみ）子供Ｄ1名@10,000小児（布団のみ）24(純和風客室(バスルーム無し))大人（男）1名@12,000大人（女）1名@12,000子供Ａ1名@12,000小学生子供Ｂ1名@12,000小児（食事布団あり）子供Ｂ1名@0小児（食事布団なし）子供Ｃ1名@3,000小児（食事のみ）子供Ｄ1名@10,000小児（布団のみ）07月23日24(純和風客室(バスルーム無し))大人（男）1名@12,000大人（女）1名@12,000子供Ａ1名@12,000小学生子供Ｂ1名@12,000小児（食事布団あり）子供Ｂ1名@0小児（食事布団なし）子供Ｃ1名@3,000小児（食事のみ）子供Ｄ1名@10,000小児（布団のみ）24(純和風客室(バスルーム無し))大人（男）1名@12,000大人（女）1名@12,000子供Ａ1名@12,000小学生子供Ｂ1名@12,000小児（食事布団あり）子供Ｂ1名@0小児（食事布団なし）子供Ｃ1名@3,000小児（食事のみ）子供Ｄ1名@10,000小児（布団のみ）07月24日24(純和風客室(バスルーム無し))大人（男）1名@12,000大人（女）1名@12,000子供Ａ1名@12,000小学生子供Ｂ1名@12,000小児（食事布団あり）子供Ｂ1名@0小児（食事布団なし）子供Ｃ1名@3,000小児（食事のみ）子供Ｄ1名@10,000小児（布団のみ）24(純和風客室(バスルーム無し))大人（男）1名@12,000大人（女）1名@12,000子供Ａ1名@12,000小学生子供Ｂ1名@12,000小児（食事布団あり）子供Ｂ1名@0小児（食事布団なし）子供Ｃ1名@3,000小児（食事のみ）子供Ｄ1名@10,000小児（布団のみ）宿泊料金計：\\366,000オプション：07月22日特選会席料理4個@12,000お土産（陣屋どらやき　6個入）1個@960お土産（やまと豚の桜味噌漬け13個@1,575お土産（やまと豚の桜味噌漬け23個@3,150 オプション料金計：\\63,135合計料金：\\429,135【宿泊者への請求額】：\\429,135---------------------------------------------------------------------ご確認事項：○携帯電話番号[MobilePhoneNumber]：00-2345-6789○ご要望・ご質問：NroomsNnightsのテストのため取扱個所：予約プロ(88)TEL052-262-8041FAX052-262-8042---</TelegramData><PhoneNumber>01-2345-6789</PhoneNumber><Email>hiroyuki_morimoto@jinya-inn.com</Email>';
    	infoTravelXML += '<PostalCode>257-0001</PostalCode><Address>神奈川県秦野市鶴巻北</Address><TotalPaxManCount>4</TotalPaxManCount><BranchFaxNumber>052-262-8042</BranchFaxNumber><Version>2.0</Version><AccommodationId>'+shopCode+'</AccommodationId></Basic><Allotment><AssignDiv>1</AssignDiv><GenderDiv>1</GenderDiv><HandleDiv>1</HandleDiv><RsvUserDiv>0</RsvUserDiv><UseDiv>0</UseDiv></Allotment><Option><OptionDate>2013-07-22</OptionDate><OptionCode>33</OptionCode><Name>特選会席料理</Name><OptionCount>4</OptionCount><OptionRate>12000</OptionRate></Option><Option><OptionDate>2013-07-22</OptionDate><Name>お土産（陣屋どらやき　6個入）</Name><OptionCount>1</OptionCount><OptionRate>960</OptionRate></Option><Option><OptionDate>2013-07-22</OptionDate><Name>お土産（やまと豚の桜味噌漬け10枚入）</Name><OptionCount>3</OptionCount><OptionRate>1575</OptionRate></Option><Option><OptionDate>2013-07-22</OptionDate><Name>お土産（やまと豚の桜味噌漬け20枚入）</Name><OptionCount>3</OptionCount><OptionRate>3150</OptionRate></Option><RoomAndRoomRateInformation><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount><RoomChildA70Request>小学生</RoomChildA70Request><RoomChildB50Request>小児（食事布団あり）小児（食事布団なし）</RoomChildB50Request><RoomChildC30Request>小児（食事のみ）</RoomChildC30Request><RoomChildDNoneRequest>小児（布団のみ）</RoomChildDNoneRequest><RoomTypeAgent>88</RoomTypeAgent><RoomFrame>--</RoomFrame><NetRmTypeGroupCode>49</NetRmTypeGroupCode><PlanGroupCode>---</PlanGroupCode></RoomInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee><PerMaleRate>12000</PerMaleRate><PerFemaleRate>12000</PerFemaleRate><RoomRatePaxMaleCount>1</RoomRatePaxMaleCount><RoomRatePaxFemaleCount>1</RoomRatePaxFemaleCount><RoomRateChildA70Count>1</RoomRateChildA70Count><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildC30Count>1</RoomRateChildC30Count><RoomRateChildDNoneCount>1</RoomRateChildDNoneCount><RoomRateChildA70Request>小学生</RoomRateChildA70Request><RoomRateChildB50Request>小児（食事布団あり）</RoomRateChildB50Request><RoomRateChildC30Request>小児（食事のみ）</RoomRateChildC30Request><RoomRateChildDNoneRequest>小児（布団のみ）</RoomRateChildDNoneRequest></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerChildB50Rate>0</PerChildB50Rate><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildB50Request>小児（食事布団なし）</RoomRateChildB50Request></RoomRateInformation></RoomAndRoomRateInformation><RoomAndRoomRateInformation><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount><RoomChildA70Request>小学生</RoomChildA70Request><RoomChildB50Request>小児（食事布団あり）小児（食事布団なし）</RoomChildB50Request>';
    	infoTravelXML += '<RoomChildC30Request>小児（食事のみ）</RoomChildC30Request><RoomChildDNoneRequest>小児（布団のみ）</RoomChildDNoneRequest><RoomTypeAgent>88</RoomTypeAgent><RoomFrame>--</RoomFrame><NetRmTypeGroupCode>49</NetRmTypeGroupCode><PlanGroupCode>---</PlanGroupCode></RoomInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee><PerMaleRate>12000</PerMaleRate><PerFemaleRate>12000</PerFemaleRate><RoomRatePaxMaleCount>1</RoomRatePaxMaleCount><RoomRatePaxFemaleCount>1</RoomRatePaxFemaleCount><RoomRateChildA70Count>1</RoomRateChildA70Count><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildC30Count>1</RoomRateChildC30Count><RoomRateChildDNoneCount>1</RoomRateChildDNoneCount><RoomRateChildA70Request>小学生</RoomRateChildA70Request><RoomRateChildB50Request>小児（食事布団あり）</RoomRateChildB50Request><RoomRateChildC30Request>小児（食事のみ）</RoomRateChildC30Request><RoomRateChildDNoneRequest>小児（布団のみ）</RoomRateChildDNoneRequest></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerChildB50Rate>0</PerChildB50Rate><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildB50Request>小児（食事布団なし）</RoomRateChildB50Request></RoomRateInformation></RoomAndRoomRateInformation><RoomAndRoomRateInformation><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount><RoomChildA70Request>小学生</RoomChildA70Request><RoomChildB50Request>小児（食事布団あり）小児（食事布団なし）</RoomChildB50Request><RoomChildC30Request>小児（食事のみ）</RoomChildC30Request><RoomChildDNoneRequest>小児（布団のみ）</RoomChildDNoneRequest><RoomTypeAgent>88</RoomTypeAgent><RoomFrame>--</RoomFrame><NetRmTypeGroupCode>49</NetRmTypeGroupCode><PlanGroupCode>---</PlanGroupCode></RoomInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee><PerMaleRate>12000</PerMaleRate><PerFemaleRate>12000</PerFemaleRate><RoomRatePaxMaleCount>1</RoomRatePaxMaleCount><RoomRatePaxFemaleCount>1</RoomRatePaxFemaleCount><RoomRateChildA70Count>1</RoomRateChildA70Count><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildC30Count>1</RoomRateChildC30Count><RoomRateChildDNoneCount>1</RoomRateChildDNoneCount><RoomRateChildA70Request>小学生</RoomRateChildA70Request><RoomRateChildB50Request>小児（食事布団あり）</RoomRateChildB50Request><RoomRateChildC30Request>小児（食事のみ）</RoomRateChildC30Request><RoomRateChildDNoneRequest>小児（布団のみ）</RoomRateChildDNoneRequest></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerChildB50Rate>0</PerChildB50Rate><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildB50Request>小児（食事布団なし）</RoomRateChildB50Request></RoomRateInformation></RoomAndRoomRateInformation><RoomAndRoomRateInformation><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount><RoomChildA70Request>小学生</RoomChildA70Request><RoomChildB50Request>小児（食事布団あり）小児（食事布団なし）</RoomChildB50Request><RoomChildC30Request>小児（食事のみ）</RoomChildC30Request><RoomChildDNoneRequest>小児（布団のみ）</RoomChildDNoneRequest><RoomTypeAgent>88</RoomTypeAgent><RoomFrame>--</RoomFrame><NetRmTypeGroupCode>49</NetRmTypeGroupCode><PlanGroupCode>---</PlanGroupCode></RoomInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee><PerMaleRate>12000</PerMaleRate><PerFemaleRate>12000</PerFemaleRate><RoomRatePaxMaleCount>1</RoomRatePaxMaleCount><RoomRatePaxFemaleCount>1</RoomRatePaxFemaleCount><RoomRateChildA70Count>1</RoomRateChildA70Count><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildC30Count>1</RoomRateChildC30Count><RoomRateChildDNoneCount>1</RoomRateChildDNoneCount><RoomRateChildA70Request>小学生</RoomRateChildA70Request><RoomRateChildB50Request>小児（食事布団あり）</RoomRateChildB50Request><RoomRateChildC30Request>小児（食事のみ）</RoomRateChildC30Request><RoomRateChildDNoneRequest>小児（布団のみ）</RoomRateChildDNoneRequest></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerChildB50Rate>0</PerChildB50Rate><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildB50Request>小児（食事布団なし）</RoomRateChildB50Request></RoomRateInformation></RoomAndRoomRateInformation><RoomAndRoomRateInformation><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount><RoomChildA70Request>小学生</RoomChildA70Request><RoomChildB50Request>小児（食事布団あり）小児（食事布団なし）</RoomChildB50Request><RoomChildC30Request>小児（食事のみ）</RoomChildC30Request><RoomChildDNoneRequest>小児（布団のみ）</RoomChildDNoneRequest><RoomTypeAgent>88</RoomTypeAgent><RoomFrame>--</RoomFrame><NetRmTypeGroupCode>49</NetRmTypeGroupCode><PlanGroupCode>---</PlanGroupCode></RoomInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee><PerMaleRate>12000</PerMaleRate><PerFemaleRate>12000</PerFemaleRate><RoomRatePaxMaleCount>1</RoomRatePaxMaleCount><RoomRatePaxFemaleCount>1</RoomRatePaxFemaleCount><RoomRateChildA70Count>1</RoomRateChildA70Count><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildC30Count>1</RoomRateChildC30Count><RoomRateChildDNoneCount>1</RoomRateChildDNoneCount><RoomRateChildA70Request>小学生</RoomRateChildA70Request><RoomRateChildB50Request>小児（食事布団あり）</RoomRateChildB50Request><RoomRateChildC30Request>小児（食事のみ）</RoomRateChildC30Request><RoomRateChildDNoneRequest>小児（布団のみ）</RoomRateChildDNoneRequest></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerChildB50Rate>0</PerChildB50Rate><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildB50Request>小児（食事布団なし）</RoomRateChildB50Request></RoomRateInformation></RoomAndRoomRateInformation><RoomAndRoomRateInformation><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount><RoomChildA70Request>小学生</RoomChildA70Request><RoomChildB50Request>小児（食事布団あり）小児（食事布団なし）</RoomChildB50Request><RoomChildC30Request>小児（食事のみ）</RoomChildC30Request><RoomChildDNoneRequest>小児（布団のみ）</RoomChildDNoneRequest><RoomTypeAgent>88</RoomTypeAgent><RoomFrame>--</RoomFrame><NetRmTypeGroupCode>49</NetRmTypeGroupCode><PlanGroupCode>---</PlanGroupCode></RoomInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee><PerMaleRate>12000</PerMaleRate><PerFemaleRate>12000</PerFemaleRate><RoomRatePaxMaleCount>1</RoomRatePaxMaleCount><RoomRatePaxFemaleCount>1</RoomRatePaxFemaleCount><RoomRateChildA70Count>1</RoomRateChildA70Count><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildC30Count>1</RoomRateChildC30Count><RoomRateChildDNoneCount>1</RoomRateChildDNoneCount><RoomRateChildA70Request>小学生</RoomRateChildA70Request><RoomRateChildB50Request>小児（食事布団あり）</RoomRateChildB50Request><RoomRateChildC30Request>小児（食事のみ）</RoomRateChildC30Request><RoomRateChildDNoneRequest>小児（布団のみ）</RoomRateChildDNoneRequest></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerChildB50Rate>0</PerChildB50Rate><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildB50Request>小児（食事布団なし）</RoomRateChildB50Request></RoomRateInformation></RoomAndRoomRateInformation><OtherInfo><GuestRequest>○携帯電話番号[MobilePhoneNumber]：00-2345-6789○ご要望・ご質問：NroomsNnightsのテストのため</GuestRequest></OtherInfo></RisaplsCommonInformation><AgentNativeInformation><Extend><AmountClaimed>429135</AmountClaimed></Extend><Extendmytrip><SettlementDiv>4</SettlementDiv></Extendmytrip></AgentNativeInformation></RisaplsInformation></AllotmentBookingReport>';
    	rs = WS_BookingEngineService.createBookingService(infoTravelXML);
    	Test.startTest();
    	
    	infoTravelXML = '<?xmlversion="1.0"encoding="UTF-8"standalone="yes"?><AllotmentBookingReport><TransactionType><DataID>' + leadIndexLst[0].ID__c + '</DataID> <DataFrom>FromTravelAgency</DataFrom><DataClassification>CancellationReport</DataClassification><SystemDate>2013-07-09</SystemDate></TransactionType><AccommodationInformation><AccommodationName>元湯陣屋</AccommodationName><AccommodationCode>14000010</AccommodationCode></AccommodationInformation><SalesOfficeInformation><SalesOfficeCompanyName>予約プロ</SalesOfficeCompanyName><SalesOfficeName>予約プロ</SalesOfficeName><SalesOfficeCode>88</SalesOfficeCode><SalesOfficePhoneNumber>052-262-8041</SalesOfficePhoneNumber></SalesOfficeInformation><BasicInformation><TravelAgencyBookingNumber>A001781590</TravelAgencyBookingNumber><TravelAgencyBookingDate>2013-07-09</TravelAgencyBookingDate><TravelAgencyBookingTime>23:47:14</TravelAgencyBookingTime><TravelAgencyReportNumber>00000051</TravelAgencyReportNumber><GuestOrGroupNameSingleByte>ﾃｽﾄﾖﾔｸ_</GuestOrGroupNameSingleByte><GuestOrGroupNameKanjiName>テスト予約No.2013/07/09_</GuestOrGroupNameKanjiName><CheckInDate>2013-07-22</CheckInDate><CheckInTime>15:30:00</CheckInTime><CheckOutDate>2013-07-25</CheckOutDate><Nights>3</Nights><TotalRoomCount>2</TotalRoomCount><GrandTotalPaxCount>14</GrandTotalPaxCount><TotalPaxMaleCount>2</TotalPaxMaleCount><TotalPaxFemaleCount>2</TotalPaxFemaleCount><TotalChildA70Count>2</TotalChildA70Count><TotalChildB50Count>4</TotalChildB50Count><TotalChildC30Count>2</TotalChildC30Count><TotalChildDNoneCount>2</TotalChildDNoneCount><PackagePlanName>【１泊朝食付】朝膳朝食付きプラン　チェックイン24:00までOK！</PackagePlanName><PackagePlanCode>3333</PackagePlanCode><MealCondition>1nightBreakfast</MealCondition><SpecificMealCondition>NoneSpecified</SpecificMealCondition><OtherServiceInformation>○携帯電話番号[MobilePhoneNumber]：00-2345-6789○ご要望・ご質問：NroomsNnightsのテストのため</OtherServiceInformation></BasicInformation><BasicRateInformation><RoomRateOrPersonalRate>PersonalRate</RoomRateOrPersonalRate><TaxServiceFee>IncludingServiceAndTax</TaxServiceFee><TotalAccommodationCharge>429135</TotalAccommodationCharge></BasicRateInformation><RoomAndGuestInformation><RoomAndGuestList><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount></RoomInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerChildB50Rate>0</PerChildB50Rate></RoomRateInformation></RoomAndGuestList><RoomAndGuestList><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>2</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount></RoomInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerChildB50Rate>0</PerChildB50Rate></RoomRateInformation></RoomAndGuestList><RoomAndGuestList><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount></RoomInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerChildB50Rate>0</PerChildB50Rate></RoomRateInformation></RoomAndGuestList><RoomAndGuestList><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>2</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount></RoomInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerChildB50Rate>0</PerChildB50Rate></RoomRateInformation></RoomAndGuestList><RoomAndGuestList><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount></RoomInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerChildB50Rate>0</PerChildB50Rate></RoomRateInformation></RoomAndGuestList><RoomAndGuestList><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>1</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount></RoomInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerChildB50Rate>0</PerChildB50Rate></RoomRateInformation></RoomAndGuestList></RoomAndGuestInformation><RisaplsInformation><RisaplsCommonInformation><Basic><SalesOfficeCompanyCode>88</SalesOfficeCompanyCode><TelegramDiv></TelegramDiv><RisaplsDataID></RisaplsDataID><RisaplsTelegramNumber></RisaplsTelegramNumber>';
    	infoTravelXML += '<TelegramData>予約通知予約プロSNT-NET07-0923:49(88)予約番号：A001781590NO.00000051元湯陣屋様(14000010)宿泊者情報：テスト予約No.2013/07/09_TEL:01-2345-6789ﾃｽﾄﾖﾔｸ_Mail:hiroyuki_morimoto@jinya-inn.com住所:(〒257-0001)神奈川県秦野市鶴巻北inn.com住所:(〒257-0001)神奈川県秦野市鶴巻北プラン名：【１泊朝食付】朝膳朝食付きプラン　チェックイン24:00までOK！(185)2013年07月22日から3泊朝食付サ込税込入込方法：チェックイン時間：15:30人員総数：14人内訳：(男)2名+(女)2名+(Ａ)2名+(Ｂ)4名+(Ｃ)2名+(Ｄ)2名客室総数：2室07月22日24(純和風客室(バスルーム無し))大人（男）1名@12,000大人（女）1名@12,000子供Ａ1名@12,000小学生子供Ｂ1名@12,000小児（食事布団あり）子供Ｂ1名@0小児（食事布団なし）子供Ｃ1名@3,000小児（食事のみ）子供Ｄ1名@10,000小児（布団のみ）24(純和風客室(バスルーム無し))大人（男）1名@12,000大人（女）1名@12,000子供Ａ1名@12,000小学生子供Ｂ1名@12,000小児（食事布団あり）子供Ｂ1名@0小児（食事布団なし）子供Ｃ1名@3,000小児（食事のみ）子供Ｄ1名@10,000小児（布団のみ）07月23日24(純和風客室(バスルーム無し))大人（男）1名@12,000大人（女）1名@12,000子供Ａ1名@12,000小学生子供Ｂ1名@12,000小児（食事布団あり）子供Ｂ1名@0小児（食事布団なし）子供Ｃ1名@3,000小児（食事のみ）子供Ｄ1名@10,000小児（布団のみ）24(純和風客室(バスルーム無し))大人（男）1名@12,000大人（女）1名@12,000子供Ａ1名@12,000小学生子供Ｂ1名@12,000小児（食事布団あり）子供Ｂ1名@0小児（食事布団なし）子供Ｃ1名@3,000小児（食事のみ）子供Ｄ1名@10,000小児（布団のみ）07月24日24(純和風客室(バスルーム無し))大人（男）1名@12,000大人（女）1名@12,000子供Ａ1名@12,000小学生子供Ｂ1名@12,000小児（食事布団あり）子供Ｂ1名@0小児（食事布団なし）子供Ｃ1名@3,000小児（食事のみ）子供Ｄ1名@10,000小児（布団のみ）24(純和風客室(バスルーム無し))大人（男）1名@12,000大人（女）1名@12,000子供Ａ1名@12,000小学生子供Ｂ1名@12,000小児（食事布団あり）子供Ｂ1名@0小児（食事布団なし）子供Ｃ1名@3,000小児（食事のみ）子供Ｄ1名@10,000小児（布団のみ）宿泊料金計：\\366,000オプション：07月22日特選会席料理4個@12,000お土産（陣屋どらやき　6個入）1個@960お土産（やまと豚の桜味噌漬け13個@1,575お土産（やまと豚の桜味噌漬け23個@3,150 オプション料金計：\\63,135合計料金：\\429,135【宿泊者への請求額】：\\429,135---------------------------------------------------------------------ご確認事項：○携帯電話番号[MobilePhoneNumber]：00-2345-6789○ご要望・ご質問：NroomsNnightsのテストのため取扱個所：予約プロ(88)TEL052-262-8041FAX052-262-8042---</TelegramData><PhoneNumber>01-2345-6789</PhoneNumber><Email>hiroyuki_morimoto@jinya-inn.com</Email>';
    	infoTravelXML += '<PostalCode>257-0001</PostalCode><Address>神奈川県秦野市鶴巻北</Address><TotalPaxManCount>4</TotalPaxManCount><BranchFaxNumber>052-262-8042</BranchFaxNumber><Version>2.0</Version><AccommodationId>'+shopCode+'</AccommodationId></Basic><Allotment><AssignDiv>1</AssignDiv><GenderDiv>1</GenderDiv><HandleDiv>1</HandleDiv><RsvUserDiv>0</RsvUserDiv><UseDiv>0</UseDiv></Allotment><Option><OptionDate>2013-07-22</OptionDate><OptionCode>33</OptionCode><Name>特選会席料理</Name><OptionCount>4</OptionCount><OptionRate>12000</OptionRate></Option><Option><OptionDate>2013-07-22</OptionDate><Name>お土産（陣屋どらやき　6個入）</Name><OptionCount>1</OptionCount><OptionRate>960</OptionRate></Option><Option><OptionDate>2013-07-22</OptionDate><Name>お土産（やまと豚の桜味噌漬け10枚入）</Name><OptionCount>3</OptionCount><OptionRate>1575</OptionRate></Option><Option><OptionDate>2013-07-22</OptionDate><Name>お土産（やまと豚の桜味噌漬け20枚入）</Name><OptionCount>3</OptionCount><OptionRate>3150</OptionRate></Option><RoomAndRoomRateInformation><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount><RoomChildA70Request>小学生</RoomChildA70Request><RoomChildB50Request>小児（食事布団あり）小児（食事布団なし）</RoomChildB50Request><RoomChildC30Request>小児（食事のみ）</RoomChildC30Request><RoomChildDNoneRequest>小児（布団のみ）</RoomChildDNoneRequest><RoomTypeAgent>88</RoomTypeAgent><RoomFrame>--</RoomFrame><NetRmTypeGroupCode>49</NetRmTypeGroupCode><PlanGroupCode>---</PlanGroupCode></RoomInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee><PerMaleRate>12000</PerMaleRate><PerFemaleRate>12000</PerFemaleRate><RoomRatePaxMaleCount>1</RoomRatePaxMaleCount><RoomRatePaxFemaleCount>1</RoomRatePaxFemaleCount><RoomRateChildA70Count>1</RoomRateChildA70Count><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildC30Count>1</RoomRateChildC30Count><RoomRateChildDNoneCount>1</RoomRateChildDNoneCount><RoomRateChildA70Request>小学生</RoomRateChildA70Request><RoomRateChildB50Request>小児（食事布団あり）</RoomRateChildB50Request><RoomRateChildC30Request>小児（食事のみ）</RoomRateChildC30Request><RoomRateChildDNoneRequest>小児（布団のみ）</RoomRateChildDNoneRequest></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerChildB50Rate>0</PerChildB50Rate><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildB50Request>小児（食事布団なし）</RoomRateChildB50Request></RoomRateInformation></RoomAndRoomRateInformation><RoomAndRoomRateInformation><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount><RoomChildA70Request>小学生</RoomChildA70Request><RoomChildB50Request>小児（食事布団あり）小児（食事布団なし）</RoomChildB50Request>';
    	infoTravelXML += '<RoomChildC30Request>小児（食事のみ）</RoomChildC30Request><RoomChildDNoneRequest>小児（布団のみ）</RoomChildDNoneRequest><RoomTypeAgent>88</RoomTypeAgent><RoomFrame>--</RoomFrame><NetRmTypeGroupCode>49</NetRmTypeGroupCode><PlanGroupCode>---</PlanGroupCode></RoomInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee><PerMaleRate>12000</PerMaleRate><PerFemaleRate>12000</PerFemaleRate><RoomRatePaxMaleCount>1</RoomRatePaxMaleCount><RoomRatePaxFemaleCount>1</RoomRatePaxFemaleCount><RoomRateChildA70Count>1</RoomRateChildA70Count><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildC30Count>1</RoomRateChildC30Count><RoomRateChildDNoneCount>1</RoomRateChildDNoneCount><RoomRateChildA70Request>小学生</RoomRateChildA70Request><RoomRateChildB50Request>小児（食事布団あり）</RoomRateChildB50Request><RoomRateChildC30Request>小児（食事のみ）</RoomRateChildC30Request><RoomRateChildDNoneRequest>小児（布団のみ）</RoomRateChildDNoneRequest></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerChildB50Rate>0</PerChildB50Rate><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildB50Request>小児（食事布団なし）</RoomRateChildB50Request></RoomRateInformation></RoomAndRoomRateInformation><RoomAndRoomRateInformation><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount><RoomChildA70Request>小学生</RoomChildA70Request><RoomChildB50Request>小児（食事布団あり）小児（食事布団なし）</RoomChildB50Request><RoomChildC30Request>小児（食事のみ）</RoomChildC30Request><RoomChildDNoneRequest>小児（布団のみ）</RoomChildDNoneRequest><RoomTypeAgent>88</RoomTypeAgent><RoomFrame>--</RoomFrame><NetRmTypeGroupCode>49</NetRmTypeGroupCode><PlanGroupCode>---</PlanGroupCode></RoomInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee><PerMaleRate>12000</PerMaleRate><PerFemaleRate>12000</PerFemaleRate><RoomRatePaxMaleCount>1</RoomRatePaxMaleCount><RoomRatePaxFemaleCount>1</RoomRatePaxFemaleCount><RoomRateChildA70Count>1</RoomRateChildA70Count><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildC30Count>1</RoomRateChildC30Count><RoomRateChildDNoneCount>1</RoomRateChildDNoneCount><RoomRateChildA70Request>小学生</RoomRateChildA70Request><RoomRateChildB50Request>小児（食事布団あり）</RoomRateChildB50Request><RoomRateChildC30Request>小児（食事のみ）</RoomRateChildC30Request><RoomRateChildDNoneRequest>小児（布団のみ）</RoomRateChildDNoneRequest></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerChildB50Rate>0</PerChildB50Rate><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildB50Request>小児（食事布団なし）</RoomRateChildB50Request></RoomRateInformation></RoomAndRoomRateInformation><RoomAndRoomRateInformation><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount><RoomChildA70Request>小学生</RoomChildA70Request><RoomChildB50Request>小児（食事布団あり）小児（食事布団なし）</RoomChildB50Request><RoomChildC30Request>小児（食事のみ）</RoomChildC30Request><RoomChildDNoneRequest>小児（布団のみ）</RoomChildDNoneRequest><RoomTypeAgent>88</RoomTypeAgent><RoomFrame>--</RoomFrame><NetRmTypeGroupCode>49</NetRmTypeGroupCode><PlanGroupCode>---</PlanGroupCode></RoomInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee><PerMaleRate>12000</PerMaleRate><PerFemaleRate>12000</PerFemaleRate><RoomRatePaxMaleCount>1</RoomRatePaxMaleCount><RoomRatePaxFemaleCount>1</RoomRatePaxFemaleCount><RoomRateChildA70Count>1</RoomRateChildA70Count><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildC30Count>1</RoomRateChildC30Count><RoomRateChildDNoneCount>1</RoomRateChildDNoneCount><RoomRateChildA70Request>小学生</RoomRateChildA70Request><RoomRateChildB50Request>小児（食事布団あり）</RoomRateChildB50Request><RoomRateChildC30Request>小児（食事のみ）</RoomRateChildC30Request><RoomRateChildDNoneRequest>小児（布団のみ）</RoomRateChildDNoneRequest></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerChildB50Rate>0</PerChildB50Rate><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildB50Request>小児（食事布団なし）</RoomRateChildB50Request></RoomRateInformation></RoomAndRoomRateInformation><RoomAndRoomRateInformation><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount><RoomChildA70Request>小学生</RoomChildA70Request><RoomChildB50Request>小児（食事布団あり）小児（食事布団なし）</RoomChildB50Request><RoomChildC30Request>小児（食事のみ）</RoomChildC30Request><RoomChildDNoneRequest>小児（布団のみ）</RoomChildDNoneRequest><RoomTypeAgent>88</RoomTypeAgent><RoomFrame>--</RoomFrame><NetRmTypeGroupCode>49</NetRmTypeGroupCode><PlanGroupCode>---</PlanGroupCode></RoomInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee><PerMaleRate>12000</PerMaleRate><PerFemaleRate>12000</PerFemaleRate><RoomRatePaxMaleCount>1</RoomRatePaxMaleCount><RoomRatePaxFemaleCount>1</RoomRatePaxFemaleCount><RoomRateChildA70Count>1</RoomRateChildA70Count><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildC30Count>1</RoomRateChildC30Count><RoomRateChildDNoneCount>1</RoomRateChildDNoneCount><RoomRateChildA70Request>小学生</RoomRateChildA70Request><RoomRateChildB50Request>小児（食事布団あり）</RoomRateChildB50Request><RoomRateChildC30Request>小児（食事のみ）</RoomRateChildC30Request><RoomRateChildDNoneRequest>小児（布団のみ）</RoomRateChildDNoneRequest></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerChildB50Rate>0</PerChildB50Rate><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildB50Request>小児（食事布団なし）</RoomRateChildB50Request></RoomRateInformation></RoomAndRoomRateInformation><RoomAndRoomRateInformation><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount><RoomChildA70Request>小学生</RoomChildA70Request><RoomChildB50Request>小児（食事布団あり）小児（食事布団なし）</RoomChildB50Request><RoomChildC30Request>小児（食事のみ）</RoomChildC30Request><RoomChildDNoneRequest>小児（布団のみ）</RoomChildDNoneRequest><RoomTypeAgent>88</RoomTypeAgent><RoomFrame>--</RoomFrame><NetRmTypeGroupCode>49</NetRmTypeGroupCode><PlanGroupCode>---</PlanGroupCode></RoomInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee><PerMaleRate>12000</PerMaleRate><PerFemaleRate>12000</PerFemaleRate><RoomRatePaxMaleCount>1</RoomRatePaxMaleCount><RoomRatePaxFemaleCount>1</RoomRatePaxFemaleCount><RoomRateChildA70Count>1</RoomRateChildA70Count><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildC30Count>1</RoomRateChildC30Count><RoomRateChildDNoneCount>1</RoomRateChildDNoneCount><RoomRateChildA70Request>小学生</RoomRateChildA70Request><RoomRateChildB50Request>小児（食事布団あり）</RoomRateChildB50Request><RoomRateChildC30Request>小児（食事のみ）</RoomRateChildC30Request><RoomRateChildDNoneRequest>小児（布団のみ）</RoomRateChildDNoneRequest></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerChildB50Rate>0</PerChildB50Rate><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildB50Request>小児（食事布団なし）</RoomRateChildB50Request></RoomRateInformation></RoomAndRoomRateInformation><OtherInfo><GuestRequest>○携帯電話番号[MobilePhoneNumber]：00-2345-6789○ご要望・ご質問：NroomsNnightsのテストのため</GuestRequest></OtherInfo></RisaplsCommonInformation><AgentNativeInformation><Extend><AmountClaimed>429135</AmountClaimed></Extend><Extendmytrip><SettlementDiv>4</SettlementDiv></Extendmytrip></AgentNativeInformation></RisaplsInformation></AllotmentBookingReport>';
    	rs = WS_BookingEngineService.createBookingService(infoTravelXML);
    	
    	infoTravelXML = '<?xmlversion="1.0"encoding="UTF-8"standalone="yes"?><AllotmentBookingReport><TransactionType><DataFrom>FromTravelAgency</DataFrom><DataClassification>CancellationReport</DataClassification><SystemDate>2013-07-09</SystemDate></TransactionType><AccommodationInformation><AccommodationName>元湯陣屋</AccommodationName><AccommodationCode>14000010</AccommodationCode></AccommodationInformation><SalesOfficeInformation><SalesOfficeCompanyName>予約プロ</SalesOfficeCompanyName><SalesOfficeName>予約プロ</SalesOfficeName><SalesOfficeCode>88</SalesOfficeCode><SalesOfficePhoneNumber>052-262-8041</SalesOfficePhoneNumber></SalesOfficeInformation><BasicInformation><TravelAgencyBookingNumber>A001781590</TravelAgencyBookingNumber><TravelAgencyBookingDate>2013-07-09</TravelAgencyBookingDate><TravelAgencyBookingTime>23:47:14</TravelAgencyBookingTime><TravelAgencyReportNumber>00000051</TravelAgencyReportNumber><GuestOrGroupNameSingleByte>ﾃｽﾄﾖﾔｸ_</GuestOrGroupNameSingleByte><GuestOrGroupNameKanjiName>テスト予約No.2013/07/09_</GuestOrGroupNameKanjiName><CheckInDate>2013-07-22</CheckInDate><CheckInTime>15:30:00</CheckInTime><CheckOutDate>2013-07-25</CheckOutDate><Nights>3</Nights><TotalRoomCount>2</TotalRoomCount><GrandTotalPaxCount>14</GrandTotalPaxCount><TotalPaxMaleCount>2</TotalPaxMaleCount><TotalPaxFemaleCount>2</TotalPaxFemaleCount><TotalChildA70Count>2</TotalChildA70Count><TotalChildB50Count>4</TotalChildB50Count><TotalChildC30Count>2</TotalChildC30Count><TotalChildDNoneCount>2</TotalChildDNoneCount><PackagePlanName>【１泊朝食付】朝膳朝食付きプラン　チェックイン24:00までOK！</PackagePlanName><PackagePlanCode>3333</PackagePlanCode><MealCondition>1nightBreakfast</MealCondition><SpecificMealCondition>NoneSpecified</SpecificMealCondition><OtherServiceInformation>○携帯電話番号[MobilePhoneNumber]：00-2345-6789○ご要望・ご質問：NroomsNnightsのテストのため</OtherServiceInformation></BasicInformation><BasicRateInformation><RoomRateOrPersonalRate>PersonalRate</RoomRateOrPersonalRate><TaxServiceFee>IncludingServiceAndTax</TaxServiceFee><TotalAccommodationCharge>429135</TotalAccommodationCharge></BasicRateInformation><RoomAndGuestInformation><RoomAndGuestList><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount></RoomInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerChildB50Rate>0</PerChildB50Rate></RoomRateInformation></RoomAndGuestList><RoomAndGuestList><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>2</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount></RoomInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerChildB50Rate>0</PerChildB50Rate></RoomRateInformation></RoomAndGuestList><RoomAndGuestList><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount></RoomInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerChildB50Rate>0</PerChildB50Rate></RoomRateInformation></RoomAndGuestList><RoomAndGuestList><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>2</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount></RoomInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerChildB50Rate>0</PerChildB50Rate></RoomRateInformation></RoomAndGuestList><RoomAndGuestList><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount></RoomInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerChildB50Rate>0</PerChildB50Rate></RoomRateInformation></RoomAndGuestList><RoomAndGuestList><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>1</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount></RoomInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerChildB50Rate>0</PerChildB50Rate></RoomRateInformation></RoomAndGuestList></RoomAndGuestInformation><RisaplsInformation><RisaplsCommonInformation><Basic><SalesOfficeCompanyCode>88</SalesOfficeCompanyCode><TelegramDiv></TelegramDiv><RisaplsDataID></RisaplsDataID><RisaplsTelegramNumber></RisaplsTelegramNumber>';
    	infoTravelXML += '<TelegramData>予約通知予約プロSNT-NET07-0923:49(88)予約番号：A001781590NO.00000051元湯陣屋様(14000010)宿泊者情報：テスト予約No.2013/07/09_TEL:01-2345-6789ﾃｽﾄﾖﾔｸ_Mail:hiroyuki_morimoto@jinya-inn.com住所:(〒257-0001)神奈川県秦野市鶴巻北inn.com住所:(〒257-0001)神奈川県秦野市鶴巻北プラン名：【１泊朝食付】朝膳朝食付きプラン　チェックイン24:00までOK！(185)2013年07月22日から3泊朝食付サ込税込入込方法：チェックイン時間：15:30人員総数：14人内訳：(男)2名+(女)2名+(Ａ)2名+(Ｂ)4名+(Ｃ)2名+(Ｄ)2名客室総数：2室07月22日24(純和風客室(バスルーム無し))大人（男）1名@12,000大人（女）1名@12,000子供Ａ1名@12,000小学生子供Ｂ1名@12,000小児（食事布団あり）子供Ｂ1名@0小児（食事布団なし）子供Ｃ1名@3,000小児（食事のみ）子供Ｄ1名@10,000小児（布団のみ）24(純和風客室(バスルーム無し))大人（男）1名@12,000大人（女）1名@12,000子供Ａ1名@12,000小学生子供Ｂ1名@12,000小児（食事布団あり）子供Ｂ1名@0小児（食事布団なし）子供Ｃ1名@3,000小児（食事のみ）子供Ｄ1名@10,000小児（布団のみ）07月23日24(純和風客室(バスルーム無し))大人（男）1名@12,000大人（女）1名@12,000子供Ａ1名@12,000小学生子供Ｂ1名@12,000小児（食事布団あり）子供Ｂ1名@0小児（食事布団なし）子供Ｃ1名@3,000小児（食事のみ）子供Ｄ1名@10,000小児（布団のみ）24(純和風客室(バスルーム無し))大人（男）1名@12,000大人（女）1名@12,000子供Ａ1名@12,000小学生子供Ｂ1名@12,000小児（食事布団あり）子供Ｂ1名@0小児（食事布団なし）子供Ｃ1名@3,000小児（食事のみ）子供Ｄ1名@10,000小児（布団のみ）07月24日24(純和風客室(バスルーム無し))大人（男）1名@12,000大人（女）1名@12,000子供Ａ1名@12,000小学生子供Ｂ1名@12,000小児（食事布団あり）子供Ｂ1名@0小児（食事布団なし）子供Ｃ1名@3,000小児（食事のみ）子供Ｄ1名@10,000小児（布団のみ）24(純和風客室(バスルーム無し))大人（男）1名@12,000大人（女）1名@12,000子供Ａ1名@12,000小学生子供Ｂ1名@12,000小児（食事布団あり）子供Ｂ1名@0小児（食事布団なし）子供Ｃ1名@3,000小児（食事のみ）子供Ｄ1名@10,000小児（布団のみ）宿泊料金計：\\366,000オプション：07月22日特選会席料理4個@12,000お土産（陣屋どらやき　6個入）1個@960お土産（やまと豚の桜味噌漬け13個@1,575お土産（やまと豚の桜味噌漬け23個@3,150 オプション料金計：\\63,135合計料金：\\429,135【宿泊者への請求額】：\\429,135---------------------------------------------------------------------ご確認事項：○携帯電話番号[MobilePhoneNumber]：00-2345-6789○ご要望・ご質問：NroomsNnightsのテストのため取扱個所：予約プロ(88)TEL052-262-8041FAX052-262-8042---</TelegramData><PhoneNumber>01-2345-6789</PhoneNumber><Email>hiroyuki_morimoto@jinya-inn.com</Email>';
    	infoTravelXML += '<PostalCode>257-0001</PostalCode><Address>神奈川県秦野市鶴巻北</Address><TotalPaxManCount>4</TotalPaxManCount><BranchFaxNumber>052-262-8042</BranchFaxNumber><Version>2.0</Version><AccommodationId>'+shopCode+'</AccommodationId></Basic><Allotment><AssignDiv>1</AssignDiv><GenderDiv>1</GenderDiv><HandleDiv>1</HandleDiv><RsvUserDiv>0</RsvUserDiv><UseDiv>0</UseDiv></Allotment><Option><OptionDate>2013-07-22</OptionDate><OptionCode>33</OptionCode><Name>特選会席料理</Name><OptionCount>4</OptionCount><OptionRate>12000</OptionRate></Option><Option><OptionDate>2013-07-22</OptionDate><Name>お土産（陣屋どらやき　6個入）</Name><OptionCount>1</OptionCount><OptionRate>960</OptionRate></Option><Option><OptionDate>2013-07-22</OptionDate><Name>お土産（やまと豚の桜味噌漬け10枚入）</Name><OptionCount>3</OptionCount><OptionRate>1575</OptionRate></Option><Option><OptionDate>2013-07-22</OptionDate><Name>お土産（やまと豚の桜味噌漬け20枚入）</Name><OptionCount>3</OptionCount><OptionRate>3150</OptionRate></Option><RoomAndRoomRateInformation><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount><RoomChildA70Request>小学生</RoomChildA70Request><RoomChildB50Request>小児（食事布団あり）小児（食事布団なし）</RoomChildB50Request><RoomChildC30Request>小児（食事のみ）</RoomChildC30Request><RoomChildDNoneRequest>小児（布団のみ）</RoomChildDNoneRequest><RoomTypeAgent>88</RoomTypeAgent><RoomFrame>--</RoomFrame><NetRmTypeGroupCode>49</NetRmTypeGroupCode><PlanGroupCode>---</PlanGroupCode></RoomInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee><PerMaleRate>12000</PerMaleRate><PerFemaleRate>12000</PerFemaleRate><RoomRatePaxMaleCount>1</RoomRatePaxMaleCount><RoomRatePaxFemaleCount>1</RoomRatePaxFemaleCount><RoomRateChildA70Count>1</RoomRateChildA70Count><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildC30Count>1</RoomRateChildC30Count><RoomRateChildDNoneCount>1</RoomRateChildDNoneCount><RoomRateChildA70Request>小学生</RoomRateChildA70Request><RoomRateChildB50Request>小児（食事布団あり）</RoomRateChildB50Request><RoomRateChildC30Request>小児（食事のみ）</RoomRateChildC30Request><RoomRateChildDNoneRequest>小児（布団のみ）</RoomRateChildDNoneRequest></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerChildB50Rate>0</PerChildB50Rate><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildB50Request>小児（食事布団なし）</RoomRateChildB50Request></RoomRateInformation></RoomAndRoomRateInformation><RoomAndRoomRateInformation><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount><RoomChildA70Request>小学生</RoomChildA70Request><RoomChildB50Request>小児（食事布団あり）小児（食事布団なし）</RoomChildB50Request>';
    	infoTravelXML += '<RoomChildC30Request>小児（食事のみ）</RoomChildC30Request><RoomChildDNoneRequest>小児（布団のみ）</RoomChildDNoneRequest><RoomTypeAgent>88</RoomTypeAgent><RoomFrame>--</RoomFrame><NetRmTypeGroupCode>49</NetRmTypeGroupCode><PlanGroupCode>---</PlanGroupCode></RoomInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee><PerMaleRate>12000</PerMaleRate><PerFemaleRate>12000</PerFemaleRate><RoomRatePaxMaleCount>1</RoomRatePaxMaleCount><RoomRatePaxFemaleCount>1</RoomRatePaxFemaleCount><RoomRateChildA70Count>1</RoomRateChildA70Count><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildC30Count>1</RoomRateChildC30Count><RoomRateChildDNoneCount>1</RoomRateChildDNoneCount><RoomRateChildA70Request>小学生</RoomRateChildA70Request><RoomRateChildB50Request>小児（食事布団あり）</RoomRateChildB50Request><RoomRateChildC30Request>小児（食事のみ）</RoomRateChildC30Request><RoomRateChildDNoneRequest>小児（布団のみ）</RoomRateChildDNoneRequest></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-22</RoomDate><PerChildB50Rate>0</PerChildB50Rate><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildB50Request>小児（食事布団なし）</RoomRateChildB50Request></RoomRateInformation></RoomAndRoomRateInformation><RoomAndRoomRateInformation><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount><RoomChildA70Request>小学生</RoomChildA70Request><RoomChildB50Request>小児（食事布団あり）小児（食事布団なし）</RoomChildB50Request><RoomChildC30Request>小児（食事のみ）</RoomChildC30Request><RoomChildDNoneRequest>小児（布団のみ）</RoomChildDNoneRequest><RoomTypeAgent>88</RoomTypeAgent><RoomFrame>--</RoomFrame><NetRmTypeGroupCode>49</NetRmTypeGroupCode><PlanGroupCode>---</PlanGroupCode></RoomInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee><PerMaleRate>12000</PerMaleRate><PerFemaleRate>12000</PerFemaleRate><RoomRatePaxMaleCount>1</RoomRatePaxMaleCount><RoomRatePaxFemaleCount>1</RoomRatePaxFemaleCount><RoomRateChildA70Count>1</RoomRateChildA70Count><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildC30Count>1</RoomRateChildC30Count><RoomRateChildDNoneCount>1</RoomRateChildDNoneCount><RoomRateChildA70Request>小学生</RoomRateChildA70Request><RoomRateChildB50Request>小児（食事布団あり）</RoomRateChildB50Request><RoomRateChildC30Request>小児（食事のみ）</RoomRateChildC30Request><RoomRateChildDNoneRequest>小児（布団のみ）</RoomRateChildDNoneRequest></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerChildB50Rate>0</PerChildB50Rate><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildB50Request>小児（食事布団なし）</RoomRateChildB50Request></RoomRateInformation></RoomAndRoomRateInformation><RoomAndRoomRateInformation><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount><RoomChildA70Request>小学生</RoomChildA70Request><RoomChildB50Request>小児（食事布団あり）小児（食事布団なし）</RoomChildB50Request><RoomChildC30Request>小児（食事のみ）</RoomChildC30Request><RoomChildDNoneRequest>小児（布団のみ）</RoomChildDNoneRequest><RoomTypeAgent>88</RoomTypeAgent><RoomFrame>--</RoomFrame><NetRmTypeGroupCode>49</NetRmTypeGroupCode><PlanGroupCode>---</PlanGroupCode></RoomInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee><PerMaleRate>12000</PerMaleRate><PerFemaleRate>12000</PerFemaleRate><RoomRatePaxMaleCount>1</RoomRatePaxMaleCount><RoomRatePaxFemaleCount>1</RoomRatePaxFemaleCount><RoomRateChildA70Count>1</RoomRateChildA70Count><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildC30Count>1</RoomRateChildC30Count><RoomRateChildDNoneCount>1</RoomRateChildDNoneCount><RoomRateChildA70Request>小学生</RoomRateChildA70Request><RoomRateChildB50Request>小児（食事布団あり）</RoomRateChildB50Request><RoomRateChildC30Request>小児（食事のみ）</RoomRateChildC30Request><RoomRateChildDNoneRequest>小児（布団のみ）</RoomRateChildDNoneRequest></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-23</RoomDate><PerChildB50Rate>0</PerChildB50Rate><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildB50Request>小児（食事布団なし）</RoomRateChildB50Request></RoomRateInformation></RoomAndRoomRateInformation><RoomAndRoomRateInformation><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount><RoomChildA70Request>小学生</RoomChildA70Request><RoomChildB50Request>小児（食事布団あり）小児（食事布団なし）</RoomChildB50Request><RoomChildC30Request>小児（食事のみ）</RoomChildC30Request><RoomChildDNoneRequest>小児（布団のみ）</RoomChildDNoneRequest><RoomTypeAgent>88</RoomTypeAgent><RoomFrame>--</RoomFrame><NetRmTypeGroupCode>49</NetRmTypeGroupCode><PlanGroupCode>---</PlanGroupCode></RoomInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee><PerMaleRate>12000</PerMaleRate><PerFemaleRate>12000</PerFemaleRate><RoomRatePaxMaleCount>1</RoomRatePaxMaleCount><RoomRatePaxFemaleCount>1</RoomRatePaxFemaleCount><RoomRateChildA70Count>1</RoomRateChildA70Count><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildC30Count>1</RoomRateChildC30Count><RoomRateChildDNoneCount>1</RoomRateChildDNoneCount><RoomRateChildA70Request>小学生</RoomRateChildA70Request><RoomRateChildB50Request>小児（食事布団あり）</RoomRateChildB50Request><RoomRateChildC30Request>小児（食事のみ）</RoomRateChildC30Request><RoomRateChildDNoneRequest>小児（布団のみ）</RoomRateChildDNoneRequest></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerChildB50Rate>0</PerChildB50Rate><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildB50Request>小児（食事布団なし）</RoomRateChildB50Request></RoomRateInformation></RoomAndRoomRateInformation><RoomAndRoomRateInformation><RoomInformation><RoomTypeCode>1</RoomTypeCode><RoomTypeName>純和風客室(バスルーム無し)</RoomTypeName><PerRoomPaxCount>7</PerRoomPaxCount><RoomPaxMaleCount>1</RoomPaxMaleCount><RoomPaxFemaleCount>1</RoomPaxFemaleCount><RoomChildA70Count>1</RoomChildA70Count><RoomChildB50Count>2</RoomChildB50Count><RoomChildC30Count>1</RoomChildC30Count><RoomChildDNoneCount>1</RoomChildDNoneCount><RoomChildA70Request>小学生</RoomChildA70Request><RoomChildB50Request>小児（食事布団あり）小児（食事布団なし）</RoomChildB50Request><RoomChildC30Request>小児（食事のみ）</RoomChildC30Request><RoomChildDNoneRequest>小児（布団のみ）</RoomChildDNoneRequest><RoomTypeAgent>88</RoomTypeAgent><RoomFrame>--</RoomFrame><NetRmTypeGroupCode>49</NetRmTypeGroupCode><PlanGroupCode>---</PlanGroupCode></RoomInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerPaxRate>12000</PerPaxRate><PerChildA70Rate>12000</PerChildA70Rate><PerChildB50Rate>12000</PerChildB50Rate><PerChildC30Rate>3000</PerChildC30Rate><PerChildDRate>10000</PerChildDRate><TotalRoomHotSpringTax>0</TotalRoomHotSpringTax><TotalPerRoomServiceFee>0</TotalPerRoomServiceFee><PerMaleRate>12000</PerMaleRate><PerFemaleRate>12000</PerFemaleRate><RoomRatePaxMaleCount>1</RoomRatePaxMaleCount><RoomRatePaxFemaleCount>1</RoomRatePaxFemaleCount><RoomRateChildA70Count>1</RoomRateChildA70Count><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildC30Count>1</RoomRateChildC30Count><RoomRateChildDNoneCount>1</RoomRateChildDNoneCount><RoomRateChildA70Request>小学生</RoomRateChildA70Request><RoomRateChildB50Request>小児（食事布団あり）</RoomRateChildB50Request><RoomRateChildC30Request>小児（食事のみ）</RoomRateChildC30Request><RoomRateChildDNoneRequest>小児（布団のみ）</RoomRateChildDNoneRequest></RoomRateInformation><RoomRateInformation><RoomDate>2013-07-24</RoomDate><PerChildB50Rate>0</PerChildB50Rate><RoomRateChildB50Count>1</RoomRateChildB50Count><RoomRateChildB50Request>小児（食事布団なし）</RoomRateChildB50Request></RoomRateInformation></RoomAndRoomRateInformation><OtherInfo><GuestRequest>○携帯電話番号[MobilePhoneNumber]：00-2345-6789○ご要望・ご質問：NroomsNnightsのテストのため</GuestRequest></OtherInfo></RisaplsCommonInformation><AgentNativeInformation><Extend><AmountClaimed>429135</AmountClaimed></Extend><Extendmytrip><SettlementDiv>4</SettlementDiv></Extendmytrip></AgentNativeInformation></RisaplsInformation></AllotmentBookingReport>';
    	rs = WS_BookingEngineService.createBookingService(infoTravelXML);
    	Test.stopTest();
    }
    // 8. 見積結果取得
    static testMethod void getEstimateInfoServiceTest() {
    	// 予約情報を作成する[プラン付け]
    	//Lead__c leadInfo = TestCommon.createLead();
    	// 商品情報を作成する
		// Normal商品
		List<AccountMaster__c> productLst = TestCommon.createProductMst(5);
		List<AccountMaster__c> productLst2 = TestCommon.createFullProductMst(5);
		// プラン商品作成
		AccountMaster__c planProd0 = TestCommon.createPlanProd();
		AccountMaster__c planProd1 = TestCommon.createPlanProd();
		AccountMaster__c planProd2 = TestCommon.createPlanProd();
		//　上記プランの関連プラン商品を取得する
		// 見積明細を作成する
    	//TestCommon.createBookEstItems(leadInfo, productLst);
    	// 指定の商品情報により、見積情報をチェックする　
    	String reqXml = '<GetEstimateInfoRQ><CommonRequest><ShopCode></ShopCode></CommonRequest><EstimateInfoList><EstimateInfo>'+
    					'<RoomDate>20170401</RoomDate><ProductCode>'+productLst[0].Field3__c+'</ProductCode><Quantity>2</Quantity><RowNo>1</RowNo>'+
    					'<RoomDate>20170401</RoomDate><ProductCode>'+productLst[1].Field3__c+'</ProductCode><Quantity>2</Quantity><RowNo>2</RowNo>'+
    					'<RoomDate>20170401</RoomDate><ProductCode>'+productLst[2].Field3__c+'</ProductCode><Quantity>2</Quantity><RowNo>3</RowNo>'+
    					'<RoomDate>20170401</RoomDate><ProductCode>'+productLst[3].Field3__c+'</ProductCode><Quantity>2</Quantity><RowNo>4</RowNo>'+
    					'<RoomDate>20170401</RoomDate><ProductCode>'+productLst[4].Field3__c+'</ProductCode><Quantity>2</Quantity><RowNo>5</RowNo>'+
    					'<RoomDate>20170401</RoomDate><ProductCode>'+planProd0.Field3__c+'</ProductCode><Quantity>2</Quantity><RowNo>6</RowNo>'+
    					'<RoomDate>20170401</RoomDate><ProductCode>'+planProd1.Field3__c+'</ProductCode><Quantity>2</Quantity><RowNo>7</RowNo>'+
    					'<RoomDate>20170401</RoomDate><ProductCode>'+planProd2.Field3__c+'</ProductCode><Quantity>2</Quantity><RowNo>8</RowNo>'+
    					'</EstimateInfo></EstimateInfoList></GetEstimateInfoRQ>';
    	String rs = WS_BookingEngineService.getEstimateInfoService(reqXml);
    	System.assert(rs.contains('<IsSuccess>true</IsSuccess>'),rs);
    }
    
    static testMethod void doPostTest() {
        RestRequest req = new RestRequest(); 
    	RestResponse res = new RestResponse();
        
        req.requestURI = '/services/apexrest/pmsservice/V1/getroomtypelist';  
        req.requestBody = Blob.valueOf('<?xml version="1.0" encoding="UTF-8"?>');
    	req.httpMethod = 'POST';  
        RestContext.request = req;
    	RestContext.response = res;
    	WS_BookingEngineService.doPost();
    	req.requestURI = '/services/apexrest/pmsservice/V1/getroomtypelist';  
    	WS_BookingEngineService.doPost();
    	req.requestURI = '/services/apexrest/pmsservice/V1/getplanlist';  
    	WS_BookingEngineService.doPost();
    	req.requestURI = '/services/apexrest/pmsservice/V1/getroomtypeinventorylist';  
    	WS_BookingEngineService.doPost();
    	req.requestURI = '/services/apexrest/pmsservice/V1/createBooking';  
    	WS_BookingEngineService.doPost();
    	req.requestURI = '/services/apexrest/pmsservice/V1/getbookinglist';  
    	WS_BookingEngineService.doPost();
    	req.requestURI = '/services/apexrest/pmsservice/V1/getEstimateInfo';  
    	WS_BookingEngineService.doPost();
    	req.requestURI = '/services/apexrest/pmsservice/V1/aaaaa';  
    	WS_BookingEngineService.doPost();
    }
    private static void createConfigDoc(String shopCd) {
    	createConfigDoc(shopCd,true,null);
	}
	private static void createConfigDoc(String shopCd,boolean isTemp,Plan__c plan){
		createConfigDoc(shopCd,true,null,false);
	}
    private static void createConfigDoc(String shopCd,boolean isTemp,Plan__c plan,boolean isAutoFlg){
    	String configXml = '<?xml version="1.0" encoding="UTF-8"?><root><COMMON><STOCKINTERVAL>120</STOCKINTERVAL><STOCKDELETEVAL>-3</STOCKDELETEVAL><LEADINTERVAL>10</LEADINTERVAL><LEADDELETEVAL>-30</LEADDELETEVAL><SERVICE_URL>https://test472.tl-lincoln.net/pmsservice/V1</SERVICE_URL></COMMON><SHOP><SHOPCODE>'+shopCd+'</SHOPCODE><APPCONFIG><SYSTEMID>PFg69aA0</SYSTEMID><USERID>P6820207</USERID><PASSWORD>mj2UOAL.t3</PASSWORD>'+
'<UCACTISSYNC>TRUE</UCACTISSYNC>'+
'<ROOMAUTOASSIGN>' + isAutoFlg + '</ROOMAUTOASSIGN>'+
'<ROOMSORT>DESC</ROOMSORT>'+
'<MAILDIVFLG>FALSE</MAILDIVFLG>'+
'<GENDERDIVEXT BEG="人員総数：" BEG2="内訳：" END="\\n">(男),(女)</GENDERDIVEXT>'+
'<CHGROOMTYPE>true</CHGROOMTYPE><RESET_ESTITEMS>true</RESET_ESTITEMS><CHGROMANTOKANA>true</CHGROMANTOKANA>' +
'</APPCONFIG><ACCOUNTCONFIG><SHITULYOUACCOUNT>100999</SHITULYOUACCOUNT><NYUUTOUACCOUNT>5041</NYUUTOUACCOUNT><OPTIONACCOUNT>C0000</OPTIONACCOUNT><SERVICEACCOUNT>S0000</SERVICEACCOUNT></ACCOUNTCONFIG>'+
'	<PLANCODE_CONVERT>	'+
'	    <AGT NAME="XXXXXXX">	'+
'	        <CONVERT>	'+
'	            <AGTPACKAGECODE>A268Q,234,235</AGTPACKAGECODE>	'+
'	            <SFPLANNO>YYYYYYYY</SFPLANNO>	'+
'	        </CONVERT>	'+
'	    </AGT>	'+
'	</PLANCODE_CONVERT>	'+
'   <CONTACT_INFO_PARSE>    '+
'       <PARSE_LOGIC_INFO>   '+
'           <KEYWORD>携帯電話;Mobile Phone Number;TEL:</KEYWORD>    '+
'           <FORMAT>((090|080|070)[-| ]?\\d{4}[-| ]?\\d{4})</FORMAT>  '+
'           <TOFIELD>Contact.Phone</TOFIELD>    '+
'           <EXCLUDEVAL></EXCLUDEVAL>   '+
'       </PARSE_LOGIC_INFO> '+
'       <PARSE_LOGIC_INFO>   '+
'           <KEYWORD>誕生日;Birthday</KEYWORD> '+
'           <FORMAT>([0-9]{4})年([0-9]{1}|[0-9]{2})月([0-9]{1}|[0-9]{2})日;([0-9]{4})-([0-9]{1,2})-([0-9]{1,2});([0-9]{4})/([0-9]{1,2})/([0-9]{1,2})</FORMAT>  '+
'           <TOFIELD>Contact.Birthday</TOFIELD> '+
'           <EXCLUDEVAL>1900-01-01</EXCLUDEVAL> '+
'       </PARSE_LOGIC_INFO> '+
'       <PARSE_LOGIC_INFO AGTCODE=\'61\'> '+
'           <KEYWORD>住所:</KEYWORD>      '+
'           <FORMAT>([0-9]{3}-[0-9]{4})[)]?(.+)</FORMAT>    '+
'           <TOFIELD>Contact.MailingAddress</TOFIELD>   '+
'           <ENDKEY>\n</ENDKEY> '+
'       </PARSE_LOGIC_INFO> '+
'   </CONTACT_INFO_PARSE>   '+
'	<PAYMENT_CONVERTS>	'+
'	    <POINT_CONVERT PAYKBN="0">	'+
'	          <CONVERT AGTCODE="61">M90200</CONVERT>	'+
'	    </POINT_CONVERT>	'+
'	    <PAYMENT_CONVERT PAYKBN="2">	'+
'	          <CONVERT AGTCODE="46">M90217</CONVERT>	'+
'	    </PAYMENT_CONVERT>	'+
'	</PAYMENT_CONVERTS>	'+
'	<CHANNEL_CONVERTS>	'+
'	    <CONVERT AGTCODE="68">Ctrip</CONVERT>	'+
'	</CHANNEL_CONVERTS>	';
		if (plan != null ) configXml += '<CHILD_PLAN_CONVERT> <MATCH PRICE="2000" NAMEONLY="true">中学生宿泊代</MATCH><MATCH RATE="50" NAMEONLY="true">小学生宿泊代</MATCH><MATCH RATE="70">' + plan.PlanNo__c + '</MATCH> </CHILD_PLAN_CONVERT>';
		if (isTemp) configXml += '<EMAIL><HEAD>--------------------------料金明細--------------------------</HEAD><DETAIL>（$__部屋目__$部屋目）部屋タイプ名（$__部屋タイプ名__$）　$__大人一人料金__$円（大人）x$__大人人数__$名(男性:$__大人人員(男性)__$名　女性:$__大人人員(女性)__$名)　＋$__子供A一人料金__$円（幼児食事布団あり）×$__子供A人数__$名　＋$__子供B一人料金__$円（幼児食事布団なし）×$__子供B人数__$名　＋$__子供C一人料金__$円（幼児食事布団なし）×$__子供C人数__$名　＋$__子供D一人料金__$円（幼児食事布団なし）×$__子供D人数__$名小計：$__小計__$円</DETAIL><FOOT>合計：$__合計料金__$円　（$__税サ区分__$）</FOOT></EMAIL>';
    	configXml += '</SHOP></root>';
    	// ドキュメントを作成する
    	Document item = new Document();
    	item.Name = 'WSServiceConfigXml';
    	item.DeveloperName = item.Name;
    	item.FolderId = UserInfo.getUserId();
    	item.Body = Blob.valueOf(configXml);
    	insert item;
		
		JMST__c taxMst = TestCommon.createTaxMst();
		
		createConfigBill();
    } 
    private static void createConfigBill(){
    	Document BillSimpleHelpConfig = new Document();
        BillSimpleHelpConfig.Name = 'BillSimpleHelpConfig';
        BillSimpleHelpConfig.DeveloperName = BillSimpleHelpConfig.Name;
        BillSimpleHelpConfig.FolderId = UserInfo.getUserId();
        BillSimpleHelpConfig.Body = Blob.valueOf(getCsvSetupConfig());
        insert BillSimpleHelpConfig;

        List<String> products = new List<String>{'M99000','M99001','M99002','M99003','M99004','M99005'};
        List<AccountMaster__c> accMst = TestCommon.createPayProductMst(products);
    }
    private static String getCsvSetupConfig() {
        String csv = '<root><SHOP><SHOPCODE></SHOPCODE><PAYMENT><CONVERT><PAYTYPE>現金</PAYTYPE><MEIDALAB>預り／現計</MEIDALAB></CONVERT><CONVERT><PAYTYPE>カード</PAYTYPE><MEIDALAB>ｸﾚ計・掛計等</MEIDALAB></CONVERT><CONVERT><PAYTYPE>売掛金</PAYTYPE><MEIDALAB>掛計</MEIDALAB></CONVERT><CONVERT><PAYTYPE>クーポン</PAYTYPE><MEIDALAB>クーポン</MEIDALAB></CONVERT><CONVERT><PAYTYPE>値引</PAYTYPE><MEIDALAB>値引・割引券</MEIDALAB></CONVERT><CONVERT><PAYTYPE>予約金</PAYTYPE><MEIDALAB>予約金</MEIDALAB></CONVERT></PAYMENT><PAYMEIDA><CONVERT><MEIDALAB>預り／現計</MEIDALAB><PRODCODE>87001</PRODCODE></CONVERT><CONVERT><MEIDALAB>ｸﾚ計・掛計等</MEIDALAB><PRODCODE>85201</PRODCODE></CONVERT><CONVERT><MEIDALAB>掛計</MEIDALAB><PRODCODE>85101</PRODCODE></CONVERT><CONVERT><MEIDALAB>クーポン</MEIDALAB><PRODCODE>85610</PRODCODE></CONVERT><CONVERT><MEIDALAB>値引・割引券</MEIDALAB><PRODCODE>87005</PRODCODE></CONVERT><CONVERT><MEIDALAB>予約金</MEIDALAB><PRODCODE>87001</PRODCODE></CONVERT></PAYMEIDA></SHOP>'
                    + '</root>';
        return csv;
	}
	private static Plan__c createPlanHadHoomZero(String packageCode){
    	JMST__c taxMst =  TestCommon.createTaxMst();
    	if(CommUtils.isBlank(packageCode)) packageCode = '3333';
    	Plan__c plan = new Plan__c();
    	plan.name = 'テストプランデータ' + CommUtils.getRandom(5);
    	plan.PlanNo__c = CommUtils.getRandom(10);
    	plan.Price__c = 11500;
    	plan.PackageCode__c = '3333';
    	plan.JmstRef__c = taxMst.Id;
    	insert plan;
        // 商品情報を作成する
        List<AccountMaster__c> productLst = TestCommon.createProductMst(5);
        productLst[2].Name = CommConst.APPOPTION_ROOMPRICE_PRODNAME;
        productLst[2].ActionType__c = CommConst.PROD_ACTION_TYPE_RP;
        update productLst; 
        
        ApexPages.StandardController contrl = new ApexPages.StandardController(plan);
        PlanProductSetup ctrl = new PlanProductSetup(contrl);
        List<PlanProductSetup.PlanDetail> planDeLst = ctrl.planDetailList;
        planDeLst[0].productNm = productLst[0].Name;
        planDeLst[0].sobj.AccountMasterRef__c = productLst[0].Id;
        planDeLst[0].sobj.Price__c = 1000;
        planDeLst[0].sobj.taxRate__c = taxMst.taxRate__c;
        planDeLst[1].productNm = productLst[1].Name;
        planDeLst[1].sobj.AccountMasterRef__c = productLst[1].Id;
        planDeLst[1].sobj.Price__c = 1500;
        planDeLst[1].sobj.taxRate__c = taxMst.taxRate__c;
        planDeLst[2].productNm = productLst[2].Name;
        planDeLst[2].sobj.AccountMasterRef__c = productLst[2].Id;
        planDeLst[2].sobj.Price__c = 0;
        planDeLst[2].sobj.taxRate__c = taxMst.taxRate__c;
        planDeLst[3].productNm = productLst[3].Name;
        planDeLst[3].sobj.AccountMasterRef__c = productLst[3].Id;
        planDeLst[3].sobj.Price__c = 300;
        planDeLst[3].sobj.taxRate__c = taxMst.taxRate__c;
        planDeLst[4].productNm = productLst[4].Name;
        planDeLst[4].sobj.AccountMasterRef__c = productLst[4].Id;
        planDeLst[4].sobj.Price__c = 500;
        planDeLst[4].sobj.taxRate__c = taxMst.taxRate__c;
        ctrl.savePlanDetail();
    	return plan;
    }
}